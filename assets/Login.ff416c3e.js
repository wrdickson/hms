import{_ as y,i as o,z as L,j as p,E as r,c as V,b as t,w as n,r as s,o as $,d as f,t as _,e as g}from"./index.33301253.js";const b={name:"Login",components:{},data:function(){return{loginResponse:"",username1:"",password1:""}},computed:{accountId(){return o().account.id},jwt(){return o().state.jwt},siteName(){return L().autoloadOptions.site_name.option_value},username(){return o().account.username}},methods:{loginCheck(){p.account.login(this.username1,this.password1).then(e=>{console.log(e),this.loginResponse="",this.username1="",this.password1="",e.data.pass===1&&Number.isInteger(parseInt(e.data.account.id))?(this.loginResponse="Login Succeeded",o().setAccount(e.data.account),o().setToken(e.data.token),r({message:this.$t("message.loginSucceeded"),type:"success",center:!0}),this.$router.push("Home")):(this.loginResponse="Login Failed",o().setAccountToGuest(),o().setToken(""),r({message:this.$t("message.loginFailed"),type:"warning",center:!0}))}).catch(e=>{console.log(e)})},sendResetLink(){console.log("sendResetLink()"),this.username1.length>4?p.account.sendResetLink(this.username1,this.siteName):r({message:"Please enter your username",type:"warning",center:!0})}},mounted(){console.log(import.meta.url),console.log(!1)}},C={class:"card-header"},R=f("hr",null,null,-1);function v(e,a,N,S,T,i){const c=s("el-input"),l=s("el-form-item"),d=s("el-button"),m=s("el-form"),h=s("el-card"),k=s("el-col"),w=s("el-row");return $(),V("div",null,[t(w,null,{default:n(()=>[t(k,{span:12},{default:n(()=>[t(h,null,{header:n(()=>[f("div",C,_(e.$t("message.login")),1)]),default:n(()=>[t(m,{id:"login-form"},{default:n(()=>[t(l,{label:e.$t("message.username")},{default:n(()=>[t(c,{modelValue:e.username1,"onUpdate:modelValue":a[0]||(a[0]=u=>e.username1=u),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),t(l,{label:e.$t("message.password")},{default:n(()=>[t(c,{modelValue:e.password1,"onUpdate:modelValue":a[1]||(a[1]=u=>e.password1=u),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),t(l,null,{default:n(()=>[t(d,{onClick:i.loginCheck},{default:n(()=>[g(_(e.$t("message.login")),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),R,t(m,null,{default:n(()=>[t(l,null,{default:n(()=>[t(d,{type:"warning",onClick:i.sendResetLink},{default:n(()=>[g("Send reset link")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const B=y(b,[["render",v]]);export{B as default};
