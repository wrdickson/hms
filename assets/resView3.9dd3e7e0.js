import{_ as z,q as F,o as h,g as y,w as r,b as l,r as d,c as k,A as $,m as w,t as v,F as M,B as x,C as Q,d as _,h as V,e as C,y as g,f as b,E,i as B,j as Y,D as I,S as H,G as O,p as K,k as L,H as j,I as W,J as G,K as J,L as X,l as Z}from"./index.33301253.js";import{r as D}from"./resView.65ec67a9.js";import{F as ee}from"./FolioView.e9608674.js";const te={name:"singelDatePicker",props:["overrideDate"],emits:["singleDatePicker:dateSelected"],data(){return{selectedDate:D().startDate,size:"default"}},computed:{datepickerPlaceholder(){return this.$t("message.datepickerPlaceholder")},locale(){return F().selectedLocale}},watch:{overrideDate(e){this.selectedDate=e},selectedDate(e,t){this.$emit("singleDatePicker:dateSelected",this.selectedDate)}}};function se(e,t,n,o,s,a){const i=d("el-date-picker"),u=d("el-config-provider");return h(),y(u,{locale:a.locale},{default:r(()=>[l(i,{modelValue:s.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=c=>s.selectedDate=c),type:"date",format:"D-MMM-YYYY",placeholder:a.datepickerPlaceholder,size:s.size},null,8,["modelValue","placeholder","size"])]),_:1},8,["locale"])}const ae=z(te,[["render",se]]);const ne={props:["isFirst","isLast","resId","start","end","name","span","startTruncated","endTruncated","status"],name:"resBlock",emits:["resBlockClick"],data(){return{}},computed:{classGenerate(){return"resblock-"+this.resId},shortName(){return this.name.length>7?this.name.substring(0,7)+"...":this.name}},methods:{resClicked(e){this.$emit("resBlockClick",e)}}},A=e=>(x("data-v-f87405b0"),e=e(),Q(),e),le={key:0},oe=A(()=>_("b",null,"<",-1)),re=[oe],ie={key:1},ce={key:2,class:"float-right"},de=A(()=>_("b",null,">",-1)),ue=[de],he=A(()=>_("span",{class:"sameAsCheckoutBackground"},".",-1)),me={key:0},pe=A(()=>_("b",null,"<",-1)),fe=[pe],ge={key:1},_e={key:2,class:"float-right"},ve=A(()=>_("b",null,">",-1)),ke=[ve],Se=A(()=>_("span",{class:"sameAsCheckinBackground"},".",-1));function ye(e,t,n,o,s,a){return h(),k(M,null,[n.status==0?(h(),k("div",{key:0,class:$([a.classGenerate,"resBlockCheckedOut res-block"]),onClick:t[0]||(t[0]=i=>a.resClicked(n.resId))},[n.startTruncated&&n.isFirst?(h(),k("span",le,re)):w("",!0),n.isFirst?(h(),k("span",ie,v(a.shortName),1)):w("",!0),n.endTruncated&&n.isLast?(h(),k("span",ce,ue)):w("",!0),he],2)):w("",!0),n.status==1?(h(),k("div",{key:1,class:$([a.classGenerate,"resBlockCheckedIn res-block"]),onClick:t[1]||(t[1]=i=>a.resClicked(n.resId))},[n.startTruncated&&n.isFirst?(h(),k("span",me,fe)):w("",!0),n.isFirst?(h(),k("span",ge,v(a.shortName),1)):w("",!0),n.endTruncated&&n.isLast?(h(),k("span",_e,ke)):w("",!0),Se],2)):w("",!0)],64)}const we=z(ne,[["render",ye],["__scopeId","data-v-f87405b0"]]);const Ce={props:["resIdRef","start","end","span","startTruncated","blockIndicator"],name:"emptyBlock",emits:["empty-block-click"],methods:{emptyBlockClick(){console.log("emptyBlockClick @emptyBlock"),this.$emit("empty-block-click")}}};function be(e,t,n,o,s,a){return h(),k("div",{onClick:t[0]||(t[0]=(...i)=>a.emptyBlockClick&&a.emptyBlockClick(...i)),class:"emptyBlock"},[_("span",null,"blocked"+v(n.resIdRef),1)])}const Re=z(Ce,[["render",be]]);const Pe={props:["unassignedResArr"],name:"unassignedBlock",emits:["unassigned-block-select-res"],computed:{resQuantity(){return this.unassignedResArr.length.toString()}},data(){return{selectedUnassignedRes:null}},methods:{unassignedResSelect(e){this.$emit("unassigned-block-select-res",e)}}},De={class:"unassignedBlock"},ze=["onClick"];function Me(e,t,n,o,s,a){const i=d("font-awesome-icon"),u=d("el-button"),c=d("el-dropdown-item"),p=d("el-dropdown-menu"),f=d("el-dropdown");return h(),k("div",De,[l(f,{trigger:"click"},{dropdown:r(()=>[l(p,null,{default:r(()=>[(h(!0),k(M,null,V(n.unassignedResArr,m=>(h(),y(c,null,{default:r(()=>[_("div",{onClick:P=>a.unassignedResSelect(m.id)},v(m.customer_last),9,ze)]),_:2},1024))),256))]),_:1})]),default:r(()=>[l(u,{type:"danger"},{default:r(()=>[C(v(a.resQuantity)+"\xA0",1),l(i,{icon:"fa-solid fa-arrow-down"})]),_:1})]),_:1})])}const Ve=z(Pe,[["render",Me]]),Ye={name:"c1",props:["spaceId","showChildren","children"],emits:["c1-toggle-show-children"],computed:{hasChildren(){return this.children.length>0}},methods:{divClick(e){return console.log("divClick",this.spaceId),this.$emit("c1-toggle-show-children",this.spaceId),!1}}};const Te={key:0};function Ie(e,t){const n=d("font-awesome-icon"),o=d("el-button");return h(),k("div",{onClick:t[0]||(t[0]=(...s)=>e.divClick&&e.divClick(...s)),class:"c1-wrapper"},[e.hasChildren?(h(),k("div",Te,[e.showChildren==0?(h(),y(o,{key:0,class:"eButton",type:"primary",plain:"",size:"small"},{default:r(()=>[l(n,{icon:"fa-chevron-right",size:"sm"})]),_:1})):w("",!0),e.showChildren==1?(h(),y(o,{key:1,class:"eButton",type:"primary",plain:"",size:"small"},{default:r(()=>[l(n,{icon:"fa-chevron-down",size:"sm"})]),_:1})):w("",!0)])):w("",!0)])}const Be=z(Ye,[["render",Ie],["__scopeId","data-v-5823ffe0"]]),Ee={name:"ResViewTable",components:{c1:Be,resBlock:we,emptyBlock:Re,unassignedBlock:Ve},emits:["resview-toggle-show-children","resBlockClick","emptyBlockClick","emptyCellClick","unassigned-res-selected"],props:["tDateArray","tableData","trigger","resSpaceCopy","tableHeight"],data(){return{}},computed:{spaceLabel(){return this.$t("message.spaceLabel")}},methods:{setInitialScroll(){D().scrollTop>0&&this.setScrollTop(D().scrollTop),D().scrollLeft>0&&this.setScrollLeft(D().scrollLeft)},setScrollLeft(e){this.$refs.resViewTable.$refs.scrollBarRef.setScrollLeft(e)},setScrollTop(e){this.$refs.resViewTable.$refs.scrollBarRef.setScrollTop(e)},c1ToggleShowChildren(e){console.log("resViewTable toggle",e),this.$emit("resview-toggle-show-children",e)},cellClick(e,t){let o=t.property+"resid";if(!e[o]){let s={spaceId:e.id,selectedDate:g(t.property.substr(1)).format("YYYY-MM-DD")};t.property!="description"&&t.property!="expand"&&this.$emit("emptyCellClick",s)}},emptyBlockClick(e,t){console.log("emptyBlockClick on resViewTable",e,t)},getChildrenIds(e){const t=[],n=o=>{let s=b.find(this.resSpaceCopy,a=>a.childOf==o);if(s)b.each(s,a=>{console.log("child",a.id),t.push(a.id),n(a.id)});else return console.log("cArr",t),t};n(e)},resBlockClick(e){this.$emit("resBlockClick",e)},rowStyle(e){if(e.row.childOf>0)return b.find(this.tableData,n=>n.id==e.row.childOf).showChildren==!0?"":"display: none;"},unassignedResSelect(e){this.$emit("unassigned-res-selected",e)}},mounted(){setTimeout(this.setInitialScroll,1),this.$refs.resViewTable.$refs.scrollBarRef.wrapRef.onscroll=e=>{D().scrollLeft=e.target.scrollLeft,D().scrollTop=e.target.scrollTop}},watch:{resSpaceCopy(e,t){console.log("resSpaceCopy change on resViewTable")},tableData(){console.log("tableData wach triggered on resViewTable")},trigger(){console.log("trigger watch on resViewTable",this.trigger)}}};const Fe={"data-rel-day":"0",style:{display:"flex","align-items":"center"}},Ae={style:{display:"flex","align-items":"center"}};function Le(e,t){const n=d("el-table-column"),o=d("c1"),s=d("resBlock"),a=d("emptyBlock"),i=d("unassignedBlock"),u=d("el-table");return h(),y(u,{ref:"resViewTable",data:e.tableData,"row-style":e.rowStyle,height:e.tableHeight,"row-class-name":"resview-row","cell-class-name":"resview-table-cell","header-cell-class-name":"resview-header-cell","header-row-class-name":"resview-header-row",style:{width:"100%",padding:"0px"},onCellClick:e.cellClick,onEmptyBlockClick:e.emptyBlockClick},{default:r(()=>[l(n,{fixed:"",prop:"title",label:e.spaceLabel,width:"120"},null,8,["label"]),l(n,{prop:"expand",fixed:"",width:"27"},{default:r(c=>[_("div",Fe,[l(o,{spaceId:c.row.id,showChildren:c.row.showChildren,children:c.row.children,onC1ToggleShowChildren:e.c1ToggleShowChildren},null,8,["spaceId","showChildren","children","onC1ToggleShowChildren"])])]),_:1}),(h(!0),k(M,null,V(e.tDateArray,c=>(h(),y(n,{prop:c.dayString,label:c.dayLabel,width:"90"},{default:r(p=>[_("div",Ae,[p.row[c.dayString+"resid"]?(h(),y(s,{key:0,onResBlockClick:e.resBlockClick,resId:p.row[c.dayString+"resid"],start:p.row[c.dayString+"start"],end:p.row[c.dayString+"end"],name:p.row[c.dayString+"customer"],span:p.row[c.dayString+"span"],startTruncated:p.row[c.dayString+"starttruncated"],endTruncated:p.row[c.dayString+"endtruncated"],isFirst:p.row[c.dayString+"isfirst"],isLast:p.row[c.dayString+"islast"],status:p.row[c.dayString+"status"]},null,8,["onResBlockClick","resId","start","end","name","span","startTruncated","endTruncated","isFirst","isLast","status"])):w("",!0),p.row[c.dayString+"blocked"]?(h(),y(a,{key:1,onEmptyBlockClick:e.emptyBlockClick,resIdRef:p.row[c.dayString+"resIdRef"],start:p.row[c.dayString+"start"],end:p.row[c.dayString+"end"],span:p.row[c.dayString+"span"],startTruncated:p.row[c.dayString+"starttruncated"],endTruncated:p.row[c.dayString+"endtruncated"]},null,8,["onEmptyBlockClick","resIdRef","start","end","span","startTruncated","endTruncated"])):w("",!0),p.row[c.dayString+"unassigned"]?(h(),y(i,{key:2,onUnassignedBlockSelectRes:e.unassignedResSelect,unassignedResArr:p.row[c.dayString+"unassigned"]},null,8,["onUnassignedBlockSelectRes","unassignedResArr"])):w("",!0)])]),_:2},1032,["prop","label"]))),256))]),_:1},8,["data","row-style","height","onCellClick","onEmptyBlockClick"])}const Ne=z(Ee,[["render",Le]]),$e={name:"DateRangePicker",props:["componentKey","initialStart","initialEnd"],emits:["dateRangePicker:rangeSelected","dateRangePicker:clearDates"],data(){return{dRange:null}},computed:{endDate(){return this.dRange?g(this.dRange[1]).format("YYYY-MM-DD"):null},endPlaceholder(){return this.$t("message.endDate")},labelDates(){return this.$t("message.dates")},locale(){return F().selectedLocale},rSeperator(){return this.$t("message.to")},startDate(){return this.dRange?g(this.dRange[0]).format("YYYY-MM-DD"):null},startPlaceholder(){return this.$t("message.startDate")}},mounted(){this.initialStart&&this.initialEnd&&(this.dRange=[this.initialStart,this.initialEnd])},watch:{componentKey(e){this.dRange=null,this.$emit("dateRangePicker:rangeSelected",[null,null])},dRange(e,t){if(this.startDate!=null&&this.endDate!=null)if(this.startDate==this.endDate)E({type:"warning",message:"Start and end must be different"}),this.$emit("dateRangePicker:clearDates");else{const n=[g(this.dRange[0]).format("YYYY-MM-DD"),g(this.dRange[1]).format("YYYY-MM-DD")];this.$emit("dateRangePicker:rangeSelected",n)}}}};function Ke(e,t,n,o,s,a){const i=d("el-date-picker"),u=d("el-form-item"),c=d("el-form"),p=d("el-config-provider");return h(),k("div",null,[l(p,{locale:a.locale},{default:r(()=>[l(c,{"label-width":"120px",size:"small"},{default:r(()=>[l(u,{label:a.labelDates},{default:r(()=>[l(i,{modelValue:s.dRange,"onUpdate:modelValue":t[0]||(t[0]=f=>s.dRange=f),type:"daterange",size:"small",format:"D-MMM-YYYY",clearable:!1,"range-separator":a.rSeperator,"start-placeholder":a.startPlaceholder,"end-placeholder":a.endPlaceholder},null,8,["modelValue","range-separator","start-placeholder","end-placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["locale"])])}const qe=z($e,[["render",Ke]]),Ue={name:"RootSpacePicker",props:["availableSpaceIds","componentKey"],emits:["rootSpacePicker:spaceSelected"],data(){return{rootSpaces:null,selectedRootSpace:null}},computed:{availableSpaces(){if(this.rootSpaces&&this.availableSpaceIds){let e=[];return b.each(this.rootSpaces,t=>{b.includes(this.availableSpaceIds,t.id)&&e.push(t)}),e}else return[]},initialSpaceIdSelected(){return!!this.selectedSpaceId},labelSpace(){return this.$t("message.spaceLabel")},locale(){return this.$i18n},placeholder(){return this.$t("message.select")},token(){return B().token}},created(){Y.rootSpaces.getRootSpaces(this.token).then(e=>{this.rootSpaces=e.data.root_spaces_children_parents})},watch:{componentKey(e){console.log("cKey on rSP"),this.selectedRootSpace=null},selectedRootSpace(e,t){this.$emit("rootSpacePicker:spaceSelected",this.selectedRootSpace)},availableSpaceIds(e,t){this.selectedRootSpace=null}}};function xe(e,t,n,o,s,a){const i=d("el-option"),u=d("el-select"),c=d("el-config-provider"),p=d("el-form-item"),f=d("el-form");return h(),k("div",null,[l(f,{"label-width":"120px",size:"small",class:"cust-form"},{default:r(()=>[l(p,{label:a.labelSpace},{default:r(()=>[l(c,{locale:a.locale},{default:r(()=>[s.rootSpaces?(h(),y(u,{key:0,modelValue:s.selectedRootSpace,"onUpdate:modelValue":t[0]||(t[0]=m=>s.selectedRootSpace=m),placeholder:a.placeholder},{default:r(()=>[(h(!0),k(M,null,V(a.availableSpaces,m=>(h(),y(i,{label:m.title,value:m.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])):w("",!0)]),_:1},8,["locale"])]),_:1},8,["label"])]),_:1})])}const Qe=z(Ue,[["render",xe]]),He={name:"SearchCustomers",props:["componentKey"],emits:["searchCustomers:customerSelected"],data(){return{customers:[],form:{firstName:"",lastName:""},currentPage:1,pageSize:10,rowCount:0}},computed:{labelCustomer(){return this.$t("message.customer")},labelFirstName(){return this.$t("message.firstName")},labelLastName(){return this.$t("message.lastName")},offset(){return(this.currentPage-1)*this.pageSize},token(){return B().token}},methods:{searchC(){try{Y.customers.searchCustomers(this.form.lastName,this.form.firstName,this.token,this.offset,this.pageSize).then(e=>{console.log(e.data),this.customers=e.data.customers,this.rowCount=e.data.count}).catch(e=>{I({message:e,type:"warning"})})}catch{I({message:"Error requesting data from server",type:"warning"})}},selectCustomer(e){this.$emit("searchCustomers:customerSelected",e)}},watch:{componentKey(e){this.form.firstName="",this.form.lastName="",this.rowCount=0,this.customers=[]},currentPage(e){this.currentPage=e},offset(e){this.searchC()},pageSize(e){this.searchC()}}};function Oe(e,t,n,o,s,a){const i=d("el-input"),u=d("el-col"),c=d("el-form-item"),p=d("el-button"),f=d("el-form"),m=d("el-table-column"),P=d("el-table"),S=d("el-pagination"),T=d("el-config-provider");return h(),y(T,null,{default:r(()=>[l(f,{"label-width":"120px",size:"small"},{default:r(()=>[l(c,{label:a.labelCustomer},{default:r(()=>[l(u,{span:11},{default:r(()=>[l(i,{modelValue:s.form.lastName,"onUpdate:modelValue":t[0]||(t[0]=R=>s.form.lastName=R),placeholder:a.labelLastName},null,8,["modelValue","placeholder"])]),_:1}),l(u,{span:11},{default:r(()=>[l(i,{modelValue:s.form.firstName,"onUpdate:modelValue":t[1]||(t[1]=R=>s.form.firstName=R),placeholder:a.labelFirstName},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["label"]),l(c,null,{default:r(()=>[l(p,{type:"primary",onClick:a.searchC},{default:r(()=>[C(v(e.$t("message.searchCustomers")),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),l(P,{data:s.customers,size:"small",style:{width:"100%"},height:"200px",onRowClick:a.selectCustomer},{default:r(()=>[l(m,{fixed:"",prop:"last_name",label:a.labelLastName,width:"100"},null,8,["label"]),l(m,{fixed:"",prop:"first_name",label:a.labelFirstName,width:"100"},null,8,["label"]),l(m,{prop:"email",label:"Email",width:"120"}),l(m,{prop:"address1",label:"Address 1",width:"120"}),l(m,{prop:"address2",label:"Address 2",width:"120"}),l(m,{prop:"city",label:"City",width:"120"}),l(m,{prop:"region",label:"Region",width:"120"}),l(m,{prop:"country",label:"Country",width:"120"}),l(m,{prop:"postalCode",label:"PostalCode",width:"120"})]),_:1},8,["data","onRowClick"]),l(S,{"current-page":s.currentPage,"onUpdate:current-page":t[2]||(t[2]=R=>s.currentPage=R),"page-size":s.pageSize,"onUpdate:page-size":t[3]||(t[3]=R=>s.pageSize=R),background:"",layout:"sizes, prev, pager, next",total:s.rowCount,"page-sizes":[1,10,20,30,40,50]},null,8,["current-page","page-size","total"])]),_:1})}const q=z(He,[["render",Oe]]);H.warning=function(){};const je={name:"CreateCustomer",props:["componentKey"],emits:["createCustomer:customerCreated"],data(){return{customerForm:{firstName:"",lastName:"",email:"",phone:""},rules:{firstName:[{required:!0,message:()=>this.$t("message.firstNameIsRequired")},{min:1,max:24,message:"1 to 24"}],lastName:[{required:!0,message:()=>this.$t("message.lastNameIsRequired")},{min:2,max:24,message:"2 to 24"}],email:[{type:"email",message:()=>this.$t("message.enterCorrectEmail")}],phone:[{pattern:/^\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}$/,message:"enter a correct phone"}]}}},computed:{labelEmail(){return this.$t("message.email")},labelFirstName(){return this.$t("message.firstName")},labelLastName(){return this.$t("message.lastName")},labelPhone(){return this.$t("message.phone")},locale(){return F().selectedLocale},token(){return B().token}},methods:{submitForm(e){this.$refs[e].validate(t=>{if(t)Y.customers.createCustomer(this.token,this.customerForm.lastName,this.customerForm.firstName,this.customerForm.email,this.customerForm.phone).then(n=>{console.log(n),n.data.createCustomer&&n.data.newCustomer&&this.$emit("createCustomer:customerCreated",n.data.newCustomer)});else return console.log("error submit!!"),!1})},resetForm(e){this.$refs[e].resetFields()}},watch:{componentKey(e){this.customerForm.firstName="",this.customerForm.lastName="",this.customerForm.email="",this.customerForm.phone=""}}};function We(e,t,n,o,s,a){const i=d("el-input"),u=d("el-form-item"),c=d("el-button"),p=d("el-form"),f=d("el-config-provider");return h(),y(f,{locale:a.locale},{default:r(()=>[l(p,{model:s.customerForm,rules:s.rules,size:"small",ref:"createCustomerForm","label-width":"120px"},{default:r(()=>[l(u,{label:a.labelFirstName,prop:"firstName"},{default:r(()=>[l(i,{modelValue:s.customerForm.firstName,"onUpdate:modelValue":t[0]||(t[0]=m=>s.customerForm.firstName=m)},null,8,["modelValue"])]),_:1},8,["label"]),l(u,{label:a.labelLastName,prop:"lastName"},{default:r(()=>[l(i,{modelValue:s.customerForm.lastName,"onUpdate:modelValue":t[1]||(t[1]=m=>s.customerForm.lastName=m)},null,8,["modelValue"])]),_:1},8,["label"]),l(u,{label:a.labelEmail,prop:"email"},{default:r(()=>[l(i,{modelValue:s.customerForm.email,"onUpdate:modelValue":t[2]||(t[2]=m=>s.customerForm.email=m)},null,8,["modelValue"])]),_:1},8,["label"]),l(u,{label:a.labelPhone,prop:"phone"},{default:r(()=>[l(i,{modelValue:s.customerForm.phone,"onUpdate:modelValue":t[3]||(t[3]=m=>s.customerForm.phone=m)},null,8,["modelValue"])]),_:1},8,["label"]),l(u,null,{default:r(()=>[l(c,{type:"primary",onClick:t[4]||(t[4]=m=>a.submitForm("createCustomerForm"))},{default:r(()=>[C(v(e.$t("message.createCustomer")),1)]),_:1}),l(c,{onClick:t[5]||(t[5]=m=>a.resetForm("createCustomerForm"))},{default:r(()=>[C(v(e.$t("message.reset")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["locale"])}const U=z(je,[["render",We]]),Ge={name:"ResBedsPicker",props:["componentKey","initialBedsQty"],emits:["resBedsPicker:bedQtyChosen"],data(){return{arr:[1,2,3,4,5,6,7,8,9,10],selectedBedQty:null}},computed:{labelNumberOfBeds(){return this.$t("message.numberOfBeds")},locale(){return this.$i18n},placeholder(){return this.$t("message.select")}},mounted(){this.initialBedsQty&&(this.selectedBedQty=this.initialBedsQty)},watch:{componentKey(e){this.selectedBedQty=null},selectedBedQty(e,t){this.$emit("resBedsPicker:bedQtyChosen",this.selectedBedQty)}}};function Je(e,t,n,o,s,a){const i=d("el-option"),u=d("el-select"),c=d("el-form-item"),p=d("el-form"),f=d("el-config-provider");return h(),k("div",null,[l(f,null,{default:r(()=>[l(p,{"label-width":"120px",size:"small"},{default:r(()=>[l(c,{label:a.labelNumberOfBeds},{default:r(()=>[l(u,{modelValue:s.selectedBedQty,"onUpdate:modelValue":t[0]||(t[0]=m=>s.selectedBedQty=m),placeholder:a.placeholder},{default:r(()=>[(h(!0),k(M,null,V(s.arr,m=>(h(),y(i,{label:m,value:m},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})])}const Xe=z(Ge,[["render",Je]]),Ze={name:"ResPeoplePicker",props:["componentKey","initialPeopleQty"],emits:["resPeoplePicker:peopleQtyChosen"],data(){return{arr:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],selectedPeopleQty:null}},computed:{labelPeople(){return this.$t("message.people")},locale(){return F().selectedLocale},placeholder(){return this.$t("message.select")}},mounted(){this.initialPeopleQty&&(this.selectedPeopleQty=this.initialPeopleQty)},watch:{componentKey(e,t){console.log("componentKey change on resPoeplePic",t),this.selectedPeopleQty=null},selectedPeopleQty(e,t){console.log(this.$i18n),this.$emit("resPeoplePicker:peopleQtyChosen",this.selectedPeopleQty)}}};function et(e,t,n,o,s,a){const i=d("el-option"),u=d("el-select"),c=d("el-form-item"),p=d("el-form"),f=d("el-config-provider");return h(),k("div",null,[l(f,{locale:a.locale},{default:r(()=>[l(p,{"label-width":"120px",size:"small"},{default:r(()=>[l(c,{label:a.labelPeople},{default:r(()=>[l(u,{modelValue:s.selectedPeopleQty,"onUpdate:modelValue":t[0]||(t[0]=m=>s.selectedPeopleQty=m),placeholder:a.placeholder},{default:r(()=>[(h(!0),k(M,null,V(s.arr,m=>(h(),y(i,{label:m,value:m},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["locale"])])}const tt=z(Ze,[["render",et]]),N=()=>{const e=()=>{B().setAccountToGuest(),O.push({path:"/Login"})};return{handleRequestError:n=>{if(n)if(n.response)if(n.response.status)switch(n.response.status){case 400:I({title:"Error 400 - Bad Request",duration:0,message:"The request was malformed.  Request was not processed",type:"error"});break;case 401:I({title:"Error 401 - Unauthorized",duration:4500,message:"Authorization failed.  Request was not processed.",type:"error",onClose:e});break;case 403:I({title:"Error 403 - Forbidden",duration:0,message:"You are not allowed to perform this task.  Request was not processed",type:"error",onClose:e});break;case 404:I({title:"Error 404 - Not found",duration:4500,message:"The location of this this request was not found",type:"error"});case 500:I({title:"Server Error",duration:4500,message:"There was an error on the server.  Request was not processed",type:"error"});break;default:I({title:"Error",duration:4500,message:"There was an error.  Request was not processed",type:"error"})}else I({title:"Error",duration:4500,message:"There was an error.  Request was not processed",type:"error"});else I({title:"Error",duration:0,message:"There was an error 1.  Request was not processed",type:"error"});else I({title:"Error",duration:0,message:"There was an error 2.  Request was not processed",type:"error"})}}},st={setup(){const{handleRequestError:e}=N();return{handleRequestError:e}},name:"CreateReservation",emits:["createReservation:reloadReservations","createReservation:closeDrawer"],components:{DateRangePicker:qe,RootSpacePicker:Qe,SearchCustomers:q,CreateCustomer:U,ResBedsPicker:Xe,ResPeoplePicker:tt},data(){return{availableSpaceIds:null,isAssigned:1,selectedCustomer:null,showCreateCustomer:!1,showSearchCustomers:!1,spaceTypePref:0,startDate:null,endDate:null,selectedSpaceId:null,selectedPeople:null,selectedBeds:null,componentKey:0}},computed:{labelCustomer(){return this.$t("message.customer")},fStartDate(){return this.startDate?g(this.startDate).format("YYYY-MM-DD"):null},fEndDate(){return this.endDate?g(this.endDate).format("YYYY-MM-DD"):null},spaceTypes(){return K().spaceTypes},token(){return B().token},labelAssigned(){return this.$t("message.assigned")},labelFalse(){return this.$t("message.false")},labelTrue(){return this.$t("message.true")},typeLabel(){return this.$t("message.type")}},methods:{bedQtyChosen(e){console.log("gotem beds on create res",e),this.selectedBeds=e},checkConflicts(){Y.reservations.checkConflicts(this.fStartDate,this.fEndDate,this.selectedSpaceId,this.token).then(e=>{console.log(e)}).catch(e=>{handleError(e)})},createReservation(){let e;this.spaceTypePref?e=this.spaceTypePref:e=0,Y.reservations.createReservation(this.token,this.fStartDate,this.fEndDate,this.selectedCustomer,this.selectedSpaceId,this.selectedPeople,this.selectedBeds,this.isAssigned,e).then(t=>{t.data.create.execute_res_sql==!0&&(E({type:"success",message:"Reservation was created"}),this.$emit("createReservation:reloadReservations"),this.resetForm())}).catch(t=>{this.handleRequestError(t)})},customerSelected(e){this.selectedCustomer=e},dRangeClearDates(){this.startDate=null,this.endDate=null,this.availableSpaceIds=null},dRangeSelected(e){console.log("dRange @ change on createres",e),e[0]&&e[1]?(this.startDate=e[0],this.endDate=e[1],Y.reservations.checkAvailabilityByDates(this.fStartDate,this.fEndDate,this.token).then(t=>{console.log(t.data),this.availableSpaceIds=t.data.availability.availableSpaceIds})):(this.availableSpaceIds=[],this.startDate=null,this.endDate=null)},peopleQtyChosen(e){this.selectedPeople=e},resetForm(){this.componentKey+=1,this.availableSpaceIds=[],this.selectedCustomer=null,this.showCreateCustomer=!1,this.showSearchCustomers=!1,this.isAssigned=1,this.spaceTypePref=null,this.selectedSpaceId=null},spaceSelected(e){this.selectedSpaceId=e}},watch:{isAssigned(e,t){this.selectedSpaceId=null,this.spaceTypePref=0}}},at=_("hr",null,null,-1),nt={key:0},lt={key:0},ot=_("hr",null,null,-1);function rt(e,t){const n=d("el-button"),o=d("el-form-item"),s=d("el-form"),a=d("SearchCustomers"),i=d("CreateCustomer"),u=d("ResPeoplePicker"),c=d("ResBedsPicker"),p=d("DateRangePicker"),f=d("RootSpacePicker"),m=d("el-option"),P=d("el-select"),S=d("el-col"),T=d("el-row");return h(),y(T,null,{default:r(()=>[l(S,null,{default:r(()=>[_("h1",null,v(e.$t("message.createReservation")),1),l(n,{type:"primary",size:"small",onClick:e.resetForm},{default:r(()=>[C("Reset Form")]),_:1},8,["onClick"]),_("div",null,"spaceId: "+v(e.selectedSpaceId),1),_("div",null,"spaceTypePref: "+v(e.spaceTypePref),1),_("div",null,"isAssigned: "+v(e.isAssigned),1),at,_("div",null,[_("span",null,[e.selectedCustomer?(h(),k("span",nt,[C(v(e.$t("message.customer"))+":\xA0",1),_("b",null,v(e.selectedCustomer.first_name)+"\xA0"+v(e.selectedCustomer.last_name),1)])):w("",!0),e.selectedCustomer?(h(),y(n,{key:1,type:"warning",size:"small",style:{float:"right"},onClick:t[0]||(t[0]=R=>{e.selectedCustomer=null,e.showSearchCustomers=null,e.showCreateCustomer=null})},{default:r(()=>[C(v(e.$t("message.reset")),1)]),_:1})):w("",!0)])]),_("div",null,[e.selectedCustomer?w("",!0):(h(),k("span",lt,[l(s,{size:"small"},{default:r(()=>[l(o,{label:e.labelCustomer},{default:r(()=>[l(n,{size:"small",type:"primary",onClick:t[1]||(t[1]=R=>{e.showSearchCustomers=!0,e.showCreateCustomer=!1})},{default:r(()=>[C(v(e.$t("message.search")),1)]),_:1}),l(n,{size:"small",type:"primary",onClick:t[2]||(t[2]=R=>{e.showCreateCustomer=!0,e.showSearchCustomers=!1})},{default:r(()=>[C(v(e.$t("message.create")),1)]),_:1})]),_:1},8,["label"])]),_:1})]))]),e.showSearchCustomers&&!e.selectedCustomer?(h(),y(a,{key:0,componentKey:e.componentKey,"onSearchCustomers:customerSelected":e.customerSelected},null,8,["componentKey","onSearchCustomers:customerSelected"])):w("",!0),e.showCreateCustomer&&!e.selectedCustomer?(h(),y(i,{key:1,componentKey:e.componentKey,"onCreateCustomer:customerCreated":e.customerSelected},null,8,["componentKey","onCreateCustomer:customerCreated"])):w("",!0),ot,l(u,{componentKey:e.componentKey,"onResPeoplePicker:peopleQtyChosen":e.peopleQtyChosen},null,8,["componentKey","onResPeoplePicker:peopleQtyChosen"]),l(c,{componentKey:e.componentKey,"onResBedsPicker:bedQtyChosen":e.bedQtyChosen},null,8,["componentKey","onResBedsPicker:bedQtyChosen"]),l(p,{componentKey:e.componentKey,"onDateRangePicker:rangeSelected":e.dRangeSelected,"onDateRangePicker:clearDates":e.dRangeClearDates},null,8,["componentKey","onDateRangePicker:rangeSelected","onDateRangePicker:clearDates"]),e.availableSpaceIds&&e.isAssigned?(h(),y(f,{key:2,componentKey:e.componentKey,availableSpaceIds:e.availableSpaceIds,"onRootSpacePicker:spaceSelected":e.spaceSelected},null,8,["componentKey","availableSpaceIds","onRootSpacePicker:spaceSelected"])):w("",!0),l(s,{size:"small","label-width":"120px"},{default:r(()=>[l(o,{label:e.labelAssigned},{default:r(()=>[l(P,{modelValue:e.isAssigned,"onUpdate:modelValue":t[3]||(t[3]=R=>e.isAssigned=R)},{default:r(()=>[l(m,{label:e.labelTrue,value:1},null,8,["label"]),l(m,{label:e.labelFalse,value:0},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),e.isAssigned?w("",!0):(h(),y(o,{key:0,label:e.typeLabel},{default:r(()=>[l(P,{modelValue:e.spaceTypePref,"onUpdate:modelValue":t[4]||(t[4]=R=>e.spaceTypePref=R)},{default:r(()=>[(h(!0),k(M,null,V(e.spaceTypes,R=>(h(),y(m,{label:R.title,value:R.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]))]),_:1}),e.startDate&&e.endDate&&e.selectedCustomer&&e.selectedPeople&&e.selectedBeds&&(e.selectedSpaceId||!e.isAssigned&&e.spaceTypePref)?(h(),y(o,{key:3},{default:r(()=>[l(n,{type:"primary",size:"small",onClick:e.createReservation},{default:r(()=>[C(v(e.$t("message.createReservation")),1)]),_:1},8,["onClick"]),l(n,{type:"primary",size:"small",onClick:e.checkConflicts},{default:r(()=>[C(v(e.$t("message.availability")),1)]),_:1},8,["onClick"])]),_:1})):w("",!0)]),_:1})]),_:1})}const it=z(st,[["render",rt]]),ct={name:"EditReservation",props:["componentKey","resId","checkin","checkout","people","beds","isAssigned","spaceTypePref","spaceId","customer","customerFirst","customerLast"],emits:["edit-reservation:modify-reservation-1"],components:{SearchCustomers:q,CreateCustomer:U},data(){return{cResId:this.resId,cCheckin:this.checkin,cCheckout:this.checkout,cPeople:this.people,cBeds:this.beds,cIsAssigned:this.isAssigned,cSpaceTypePref:this.spaceTypePref,cSpaceId:this.spaceId,cCustomer:this.customer,cCustomerFirst:this.customerFirst,cCustomerLast:this.customerLast,componentKey2:0,availableSpaceIds:[],availableSpaces:[],showCreateCustomer:!1,showSearchCustomers:!1,selectedSpace:"",bedsSelectArr:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],peopleSelectArr:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]}},computed:{bedsPickerLabel(){return this.$t("message.beds")},cCheckinF(){return g(this.cDateRange[0]).format("YYYY-MM-DD")},cCheckoutF(){return g(this.cDateRange[1]).format("YYYY-MM-DD")},cDateRange:{get(){return[this.cCheckin,this.cCheckout]},set(e){this.cCheckin=g(e[0]).format("YYYY-MM-DD"),this.cCheckout=g(e[1]).format("YYYY-MM-DD")}},editReady(){return!!(this.selectedSpace||!this.cIsAssigned&&this.cSpaceTypePref)},labelAssigned(){return this.$t("message.assigned")},labelFalse(){return this.$t("message.false")},labelTrue(){return this.$t("message.true")},locale(){return F().selectedLocale},notAssignedTxt(){return this.$t("message.notAssigned")},rootSpaces(){return{...L().rootSpaces}},spaceTypes(){return K().spaceTypes},token(){return B().token},peoplePickerLabel(){return this.$t("message.people")},placeholder(){return this.$t("message.select")},rangePickerEndPlaceholder(){return this.$t("message.endDate")},rangePickerLabelDates(){return this.$t("message.dates")},rangePickerSeperator(){return this.$t("message.to")},rangePickerStartPlaceholder(){return this.$t("message.startDate")},spacePickerLabel(){return this.$t("message.spaceLabel")},typeLabel(){return this.$t("message.type")}},methods:{createCustomerSelected(e){console.log("cust created",e),this.cCustomer=e.id,this.cCustomerFirst=e.firstName,this.cCustomerLast=e.lastName,this.componentKey+=1,this.showCreateCustomer=!1},loadAvailableSpaces(){let e=[];b.each(this.rootSpaces,t=>{b.includes(this.availableSpaceIds,t.id)&&e.push(t)}),this.availableSpaces=e},loadAvailableSpaceIds(){Y.reservations.checkAvailabilityByDatesIgnoreRes(this.resId,this.cCheckinF,this.cCheckoutF,this.token).then(e=>{this.availableSpaceIds=e.data.availableSpaceIds,this.loadAvailableSpaces(),this.selectedSpace=null})},revertToProps(){this.cCheckin=this.checkin,this.cCheckout=this.checkout,this.cPeople=this.people,this.cBeds=this.beds,this.cCustomer=this.customer,this.cCustomerFirst=this.customerFirst,this.cCustomerLast=this.customerLast,this.cSpaceTypePref=this.spaceTypePref,this.cIsAssigned=this.isAssigned,this.selectedSpace=null,this.showSearchCustomers=!1,this.showCreateCustomer=!1},searchCustomerSelected(e){console.log(e),this.cCustomer=e.id,this.cCustomerFirst=e.firstName,this.cCustomerLast=e.lastName,this.componentKey2+=1,this.showSearchCustomers=!1},updateReservation(){console.log("THESE ARE current"),console.log("customer",this.cCustomer),console.log("spaceId",this.selectedSpace),console.log("people",this.cPeople),console.log("beds",this.cBeds),console.log("checkin",this.cCheckinF),console.log("checkout",this.cCheckoutF),console.log("customerFirst",this.cCustomerFirst),console.log("customerLast",this.cCustomerLast),console.log("isAssigned",this.cIsAssigned),console.log("spaceTypePref",this.cSpaceTypePref);let e=null;this.cIsAssigned?e=this.selectedSpace:e=0;let t=null;e?t=0:t=this.cSpaceTypePref;const n={res_id:this.cResId,space_id:e,people:this.cPeople,beds:this.cBeds,is_assigned:this.cIsAssigned,space_type_pref:t,checkin:this.cCheckinF,checkout:this.cCheckoutF};console.log("this IS ARGS"),console.table(n),this.$emit("edit-reservation:modify-reservation-1",n)}},mounted(){Y.reservations.checkAvailabilityByDatesIgnoreRes(this.resId,this.checkin,this.checkout,this.token).then(e=>{console.log(e),this.availableSpaceIds=e.data.availableSpaceIds,this.loadAvailableSpaces()})},watch:{componentKey(e){this.revertToProps()},resId(e){this.cResId=e},checkin(e){this.cCheckin=e},checkout(e){this.cCheckout=e},people(e){this.cPeople=e},beds(e){this.cBeds=e},isAssigned(e){this.cIsAssigned=e},spaceTypePref(e){this.cSpaceTypePref=e},spaceId(e){this.cSpaceId=e},customer(e){this.cCustomer=e},customerFirst(e){this.cCustomerFirst=e},customerLast(e){this.cCustomerLast=e},cDateRange(e){console.log("cDateRange change",e),this.loadAvailableSpaceIds()},cIsAssigned(e){this.loadAvailableSpaceIds},selectedSpace(e,t){console.log("selectedSpace change",e,t),console.log("cDateRange @ selectedSpace change:"),console.table(this.cDateRange)}}},dt={key:0};function ut(e,t,n,o,s,a){const i=d("el-option"),u=d("el-select"),c=d("el-form-item"),p=d("el-date-picker"),f=d("el-form"),m=d("el-config-provider"),P=d("el-button");return a.rootSpaces?(h(),k("div",dt,[l(m,{locale:a.locale},{default:r(()=>[l(f,{"label-width":"70px",size:"small"},{default:r(()=>[l(c,{label:a.peoplePickerLabel},{default:r(()=>[l(u,{modelValue:s.cPeople,"onUpdate:modelValue":t[0]||(t[0]=S=>s.cPeople=S),placeholder:a.placeholder},{default:r(()=>[(h(!0),k(M,null,V(s.peopleSelectArr,S=>(h(),y(i,{label:S,value:S},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(c,{label:a.bedsPickerLabel},{default:r(()=>[l(u,{modelValue:s.cBeds,"onUpdate:modelValue":t[1]||(t[1]=S=>s.cBeds=S),placeholder:a.placeholder},{default:r(()=>[(h(!0),k(M,null,V(s.bedsSelectArr,S=>(h(),y(i,{label:S,value:S},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(c,{label:a.rangePickerLabelDates},{default:r(()=>[l(p,{modelValue:a.cDateRange,"onUpdate:modelValue":t[2]||(t[2]=S=>a.cDateRange=S),type:"daterange",size:"small",format:"D-MMM-YYYY",clearable:!1,"range-separator":a.rangePickerSeperator,"start-placeholder":a.rangePickerStartPlaceholder,"end-placeholder":a.rangePickerEndPlaceholder},null,8,["modelValue","range-separator","start-placeholder","end-placeholder"])]),_:1},8,["label"]),s.cIsAssigned?(h(),y(c,{key:0,label:a.spacePickerLabel},{default:r(()=>[this.rootSpaces&&this.availableSpaceIds?(h(),y(u,{key:0,modelValue:this.selectedSpace,"onUpdate:modelValue":t[3]||(t[3]=S=>this.selectedSpace=S),placeholder:a.placeholder},{default:r(()=>[(h(!0),k(M,null,V(this.availableSpaces,S=>(h(),y(i,{label:S.title,value:S.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])):w("",!0)]),_:1},8,["label"])):w("",!0),l(c,{label:a.labelAssigned},{default:r(()=>[l(u,{modelValue:s.cIsAssigned,"onUpdate:modelValue":t[4]||(t[4]=S=>s.cIsAssigned=S)},{default:r(()=>[l(i,{label:a.labelTrue,value:1},null,8,["label"]),l(i,{label:a.labelFalse,value:0},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),s.cIsAssigned?w("",!0):(h(),y(c,{key:1,label:a.typeLabel},{default:r(()=>[l(u,{modelValue:s.cSpaceTypePref,"onUpdate:modelValue":t[5]||(t[5]=S=>s.cSpaceTypePref=S)},{default:r(()=>[(h(!0),k(M,null,V(a.spaceTypes,S=>(h(),y(i,{label:S.title,value:S.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]))]),_:1})]),_:1},8,["locale"]),_("div",null,[a.editReady?(h(),y(P,{key:0,onClick:a.updateReservation,type:"success"},{default:r(()=>[C("Save")]),_:1},8,["onClick"])):w("",!0),l(P,{onClick:a.revertToProps,type:"info"},{default:r(()=>[C("revert")]),_:1},8,["onClick"])])])):w("",!0)}const ht=z(ct,[["render",ut]]),mt={setup(){const{handleRequestError:e}=N();return{handleRequestError:e}},name:"ReservationView",props:["selectedReservation"],components:{EditReservation:ht,FolioView:ee},emits:["reservation-view:close-view","reservation-view:update-reservations","reservation-view:update-selected-reservation"],data(){return{componentKey:1,rootSpaces:null,showHistory:!1,showFolioDialog:!1}},computed:{token(){return B().token},rootSpace(){return b.find(this.rootSpaces,t=>t.id==this.selectedReservation.space_id)}},methods:{closeReservationView(){this.$emit("reservation-view:close-view")},modifyReservation1(e){Y.reservations.modifyReservation1(e,this.token).then(t=>{console.log("modifyReservation1:"),console.log(t.data),t.data.success==!0?(this.$emit("reservation-view:update-reservations"),this.$emit("reservation-view:update-selected-reservation",t.data.current_res),this.componentKey+=1,E({type:"success",message:"Reservation updated"})):E({type:"warning",message:"There was an error"})}).catch(t=>{this.handleRequestError(t)})},reservationCheckin(){Y.reservations.reservationCheckin(this.selectedReservation.id,this.token).then(e=>{e.data.checkin==!0&&e.data.reservation_after_checkin?(this.$emit("reservation-view:update-reservations"),this.$emit("reservation-view:update-selected-reservation",e.data.reservation_after_checkin),E({type:"success",message:"Reservation checked in"})):E({type:"warning",message:"There was an error"})}).catch(e=>{this.handleRequestError(e)})},reservationCheckout(){Y.reservations.reservationCheckout(this.selectedReservation.id,this.token).then(e=>{console.log(e),e.data.checkout==!0&&e.data.reservation_after_checkout&&(this.$emit("reservation-view:update-reservations"),this.$emit("reservation-view:update-selected-reservation",e.data.reservation_after_checkout),E({type:"success",message:"Reservatin checked out"}))}).catch(e=>{this.handleRequestError(e)})}},mounted(){D().showHideRootSpaceCopy?this.rootSpaces=D().showHideRootSpaceCopy:this.rootSpaces=L().rootSpaces}};const pt={key:0,class:"wrapper"},ft=_("br",null,null,-1),gt=_("span",null," : ",-1),_t={key:0},vt={key:0},kt={key:1},St={class:"historyTable"},yt={class:"historyTable"};function wt(e,t){const n=d("FolioView"),o=d("el-dialog"),s=d("font-awesome-icon"),a=d("el-button"),i=d("EditReservation"),u=d("el-collapse-item"),c=d("el-input"),p=d("el-collapse");return h(),k(M,null,[l(o,{modelValue:e.showFolioDialog,"onUpdate:modelValue":t[0]||(t[0]=f=>e.showFolioDialog=f),fullscreen:!0,"destroy-on-close":!0},{default:r(()=>[l(n,{folioId:e.selectedReservation.folio,selectedReservation:e.selectedReservation,componentKey:e.componentKey},null,8,["folioId","selectedReservation","componentKey"])]),_:1},8,["modelValue"]),e.rootSpaces?(h(),k("div",pt,[_("div",null,[l(s,{onClick:e.closeReservationView,color:"#f56c6c",icon:"fa-window-close",size:"xl",style:{float:"right"}},null,8,["onClick"])]),ft,_("div",null,v(e.selectedReservation.customer_first)+"\xA0"+v(this.selectedReservation.customer_last),1),_("div",null,[_("span",null,v(e.selectedReservation.checkin),1),gt,_("span",null,v(e.selectedReservation.checkout),1)]),e.rootSpace?(h(),k("div",_t,v(e.$t("message.spaceLabel"))+": "+v(e.rootSpace.title),1)):w("",!0),_("div",null,v(e.$t("message.people"))+": "+v(e.selectedReservation.people),1),_("div",null,v(e.$t("message.beds"))+": "+v(e.selectedReservation.beds),1),_("div",null,"Res Id : "+v(e.selectedReservation.id),1),_("div",null,[e.selectedReservation.status==0?(h(),k("span",vt,[l(a,{type:"success",onClick:e.reservationCheckin},{default:r(()=>[C(v(e.$t("message.checkin")),1)]),_:1},8,["onClick"])])):w("",!0),e.selectedReservation.status==1?(h(),k("span",kt,[l(a,{type:"info",onClick:e.reservationCheckout},{default:r(()=>[C(v(e.$t("message.checkout")),1)]),_:1},8,["onClick"])])):w("",!0),_("span",null,[l(a,{onClick:t[1]||(t[1]=f=>e.showFolioDialog=!0),type:"primary"},{default:r(()=>[C("Folio")]),_:1})])]),l(p,null,{default:r(()=>[l(u,{title:"Edit Reservation",name:"2"},{default:r(()=>[e.rootSpaces?(h(),y(i,{key:0,componentKey:e.componentKey,resId:e.selectedReservation.id,checkin:e.selectedReservation.checkin,checkout:e.selectedReservation.checkout,people:e.selectedReservation.people,beds:e.selectedReservation.beds,isAssigned:e.selectedReservation.is_assigned,spaceTypePref:e.selectedReservation.space_type_pref,spaceId:e.selectedReservation.space_id,customer:e.selectedReservation.customer,customerFirst:e.selectedReservation.first_name,customerLast:e.selectedReservation.last_name,"onEditReservation:modifyReservation1":e.modifyReservation1},null,8,["componentKey","resId","checkin","checkout","people","beds","isAssigned","spaceTypePref","spaceId","customer","customerFirst","customerLast","onEditReservation:modifyReservation1"])):w("",!0)]),_:1}),l(u,{title:"Notes",name:"1"},{default:r(()=>[l(a,{size:"small",onClick:t[2]||(t[2]=()=>{})},{default:r(()=>[C("an")]),_:1}),_("div",null,[l(c)]),_("table",St,[_("tbody",null,[(h(!0),k(M,null,V(e.selectedReservation.notes,f=>(h(),k("tr",null,[_("td",null,v(f.t),1),_("td",null,v(f.n),1),_("td",null,v(f.d),1)]))),256))])])]),_:1}),l(u,{title:"History",name:"2"},{default:r(()=>[_("table",yt,[_("tbody",null,[(h(!0),k(M,null,V(e.selectedReservation.history,f=>(h(),k("tr",null,[_("td",null,v(f.t),1),_("td",null,v(f.n),1),_("td",null,v(f.d),1)]))),256))])])]),_:1})]),_:1})])):w("",!0)],64)}const Ct=z(mt,[["render",wt]]);var bt={exports:{}};(function(e,t){(function(n,o){e.exports=o(j.exports)})(W,function(n){function o(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var s=o(n),a={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xE9rcoles_jueves_viernes_s\xE1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xE9._jue._vie._s\xE1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xE1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xEDa",dd:"%d d\xEDas",M:"un mes",MM:"%d meses",y:"un a\xF1o",yy:"%d a\xF1os"},ordinal:function(i){return i+"\xBA"}};return s.default.locale(a,null,!0),a})})(bt);const Rt={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((e,t)=>(e[t.id]=t)&&e,{})}},methods:{updatePaneComponents(){this.panes.forEach(e=>{e.update&&e.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[e.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(e,t){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=t},onMouseMove(e){this.touch.mouseDown&&(e.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(e)),this.$emit("resize",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(e,t){"ontouchstart"in window&&(e.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===t?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(e,t),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=t,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[t])},onSplitterDblClick(e,t){let n=0;this.panes=this.panes.map((o,s)=>(o.size=s===t?o.max:o.min,s!==t&&(n+=o.min),o)),this.panes[t].size-=n,this.$emit("pane-maximize",this.panes[t]),this.$emit("resized",this.panes.map(o=>({min:o.min,max:o.max,size:o.size})))},onPaneClick(e,t){this.$emit("pane-click",this.indexedPanes[t])},getCurrentMouseDrag(e){const t=this.container.getBoundingClientRect(),{clientX:n,clientY:o}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:n-t.left,y:o-t.top}},getCurrentDragPercentage(e){e=e[this.horizontal?"y":"x"];const t=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(e=t-e),e*100/t},calculatePanesSize(e){const t=this.touch.activeSplitter;let n={prevPanesSize:this.sumPrevPanesSize(t),nextPanesSize:this.sumNextPanesSize(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const o=0+(this.pushOtherPanes?0:n.prevPanesSize),s=100-(this.pushOtherPanes?0:n.nextPanesSize),a=Math.max(Math.min(this.getCurrentDragPercentage(e),s),o);let i=[t,t+1],u=this.panes[i[0]]||null,c=this.panes[i[1]]||null;const p=u.max<100&&a>=u.max+n.prevPanesSize,f=c.max<100&&a<=100-(c.max+this.sumNextPanesSize(t+1));if(p||f){p?(u.size=u.max,c.size=Math.max(100-u.max-n.prevPanesSize-n.nextPanesSize,0)):(u.size=Math.max(100-c.max-n.prevPanesSize-this.sumNextPanesSize(t+1),0),c.size=c.max);return}if(this.pushOtherPanes){const m=this.doPushOtherPanes(n,a);if(!m)return;({sums:n,panesToResize:i}=m),u=this.panes[i[0]]||null,c=this.panes[i[1]]||null}u!==null&&(u.size=Math.min(Math.max(a-n.prevPanesSize-n.prevReachedMinPanes,u.min),u.max)),c!==null&&(c.size=Math.min(Math.max(100-a-n.nextPanesSize-n.nextReachedMinPanes,c.min),c.max))},doPushOtherPanes(e,t){const n=this.touch.activeSplitter,o=[n,n+1];return t<e.prevPanesSize+this.panes[o[0]].min&&(o[0]=this.findPrevExpandedPane(n).index,e.prevReachedMinPanes=0,o[0]<n&&this.panes.forEach((s,a)=>{a>o[0]&&a<=n&&(s.size=s.min,e.prevReachedMinPanes+=s.min)}),e.prevPanesSize=this.sumPrevPanesSize(o[0]),o[0]===void 0)?(e.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((s,a)=>{a>0&&a<=n&&(s.size=s.min,e.prevReachedMinPanes+=s.min)}),this.panes[o[1]].size=100-e.prevReachedMinPanes-this.panes[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-this.panes[o[1]].min&&(o[1]=this.findNextExpandedPane(n).index,e.nextReachedMinPanes=0,o[1]>n+1&&this.panes.forEach((s,a)=>{a>n&&a<o[1]&&(s.size=s.min,e.nextReachedMinPanes+=s.min)}),e.nextPanesSize=this.sumNextPanesSize(o[1]-1),o[1]===void 0)?(e.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((s,a)=>{a<this.panesCount-1&&a>=n+1&&(s.size=s.min,e.nextReachedMinPanes+=s.min)}),this.panes[o[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-this.panes[this.panesCount-1].min-e.nextPanesSize,null):{sums:e,panesToResize:o}},sumPrevPanesSize(e){return this.panes.reduce((t,n,o)=>t+(o<e?n.size:0),0)},sumNextPanesSize(e){return this.panes.reduce((t,n,o)=>t+(o>e+1?n.size:0),0)},findPrevExpandedPane(e){return[...this.panes].reverse().find(t=>t.index<e&&t.size>t.min)||{}},findNextExpandedPane(e){return this.panes.find(t=>t.index>e+1&&t.size>t.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(e=>{const t=e.classList.contains("splitpanes__pane"),n=e.classList.contains("splitpanes__splitter");!t&&!n&&(e.parentNode.removeChild(e),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))})},addSplitter(e,t,n=!1){const o=e-1,s=document.createElement("div");s.classList.add("splitpanes__splitter"),n||(s.onmousedown=a=>this.onMouseDown(a,o),typeof window<"u"&&"ontouchstart"in window&&(s.ontouchstart=a=>this.onMouseDown(a,o)),s.onclick=a=>this.onSplitterClick(a,o+1)),this.dblClickSplitter&&(s.ondblclick=a=>this.onSplitterDblClick(a,o+1)),t.parentNode.insertBefore(s,t)},removeSplitter(e){e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.parentNode.removeChild(e)},redoSplitters(){const e=Array.from(this.container.children);e.forEach(n=>{n.className.includes("splitpanes__splitter")&&this.removeSplitter(n)});let t=0;e.forEach(n=>{n.className.includes("splitpanes__pane")&&(!t&&this.firstSplitter?this.addSplitter(t,n,!0):t&&this.addSplitter(t,n),t++)})},requestUpdate({target:e,...t}){const n=this.indexedPanes[e._.uid];Object.entries(t).forEach(([o,s])=>n[o]=s)},onPaneAdd(e){let t=-1;Array.from(e.$el.parentNode.children).some(s=>(s.className.includes("splitpanes__pane")&&t++,s===e.$el));const n=parseFloat(e.minSize),o=parseFloat(e.maxSize);this.panes.splice(t,0,{id:e._.uid,index:t,min:isNaN(n)?0:n,max:isNaN(o)?100:o,size:e.size===null?null:parseFloat(e.size),givenSize:e.size,update:e.update}),this.panes.forEach((s,a)=>s.index=a),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[t]}),this.$emit("pane-add",{index:t,panes:this.panes.map(s=>({min:s.min,max:s.max,size:s.size}))})})},onPaneRemove(e){const t=this.panes.findIndex(o=>o.id===e._.uid),n=this.panes.splice(t,1)[0];this.panes.forEach((o,s)=>o.index=s),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:{...n,index:t}}),this.$emit("pane-remove",{removed:n,panes:this.panes.map(o=>({min:o.min,max:o.max,size:o.size}))})})},resetPaneSizes(e={}){!e.addedPane&&!e.removedPane?this.initialPanesSizing():this.panes.some(t=>t.givenSize!==null||t.min||t.max<100)?this.equalizeAfterAddOrRemove(e):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size})))},equalize(){const e=100/this.panesCount;let t=0;const n=[],o=[];this.panes.forEach(s=>{s.size=Math.max(Math.min(e,s.max),s.min),t-=s.size,s.size>=s.max&&n.push(s.id),s.size<=s.min&&o.push(s.id)}),t>.1&&this.readjustSizes(t,n,o)},initialPanesSizing(){let e=100;const t=[],n=[];let o=0;this.panes.forEach(a=>{e-=a.size,a.size!==null&&o++,a.size>=a.max&&t.push(a.id),a.size<=a.min&&n.push(a.id)});let s=100;e>.1&&(this.panes.forEach(a=>{a.size===null&&(a.size=Math.max(Math.min(e/(this.panesCount-o),a.max),a.min)),s-=a.size}),s>.1&&this.readjustSizes(e,t,n))},equalizeAfterAddOrRemove({addedPane:e,removedPane:t}={}){let n=100/this.panesCount,o=0;const s=[],a=[];e&&e.givenSize!==null&&(n=(100-e.givenSize)/(this.panesCount-1)),this.panes.forEach(i=>{o-=i.size,i.size>=i.max&&s.push(i.id),i.size<=i.min&&a.push(i.id)}),!(Math.abs(o)<.1)&&(this.panes.forEach(i=>{e&&e.givenSize!==null&&e.id===i.id||(i.size=Math.max(Math.min(n,i.max),i.min)),o-=i.size,i.size>=i.max&&s.push(i.id),i.size<=i.min&&a.push(i.id)}),o>.1&&this.readjustSizes(o,s,a))},readjustSizes(e,t,n){let o;e>0?o=e/(this.panesCount-t.length):o=e/(this.panesCount-n.length),this.panes.forEach((s,a)=>{if(e>0&&!t.includes(s.id)){const i=Math.max(Math.min(s.size+o,s.max),s.min),u=i-s.size;e-=u,s.size=i}else if(!n.includes(s.id)){const i=Math.max(Math.min(s.size+o,s.max),s.min),u=i-s.size;e-=u,s.size=i}s.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[s.id].size}%`})}),Math.abs(e)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(e){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((t,n)=>{t.ondblclick=e?o=>this.onSplitterDblClick(o,n):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return G("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}},Pt=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},Dt={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}};function zt(e,t,n,o,s,a){return h(),k("div",{class:"splitpanes__pane",onClick:t[0]||(t[0]=i=>a.onPaneClick(i,e._.uid)),style:X(e.style)},[J(e.$slots,"default")],4)}const Mt=Pt(Dt,[["render",zt]]);const Vt={setup(){const{handleRequestError:e}=N();return{handleRequestError:e}},name:"resView3",components:{singleDatePicker:ae,ResViewTable:Ne,CreateReservation:it,ReservationView:Ct,Splitpanes:Rt,Pane:Mt},data(){return{leftPaneSize:30,overRideSingleDatePicker:"",reservationDialog:!1,reservations:[],rootSpaces:null,selectedReservation:null,showCreateReservation:!0,showReservationView:!1,trigger:1,windowHeight:0,windowWidth:0,componentTrigger:0}},computed:{locale(){return F().selectedLocale},token(){return B().token},rDrawerWidth(){if(this.windowWidth<768)return"100%";if(this.windowWidth>768&&this.windowWidth<1200)return"500px";if(this.windowWidth>=1200)return"35%"},resViewEndDate(){return g(this.resViewStartDate).add(31,"days").format("YYYY-MM-DD")},resViewStartDate(){return D().startDate},resTableData(){let e,t,n,o,s,a,i;return b.each(this.rootSpaces,u=>{const c=Object.keys(u);b.each(c,p=>{p.substring(0,1)=="D"&&delete u[p]})}),i=this.rootSpaces,b.each(this.reservations,u=>{if(u.checkout!=this.resViewStartDate){let c=b.find(i,p=>p.id==u.space_id);if(c){g(u.checkout).isAfter(g(this.resViewEndDate))?o=!1:o=!0,g(u.checkin).isBefore(g(this.resViewStartDate))?(n=!1,e=g(this.resViewStartDate).format("YYYYMMDD"),t=g(this.resViewStartDate).format("YYYY-MM-DD"),g(u.checkout).diff(g(this.resViewStartDate),"d")):(n=!0,e=g(u.checkin).format("YYYYMMDD"),t=g(u.checkin).format("YYYY-MM-DD"),g(u.checkout).diff(g(u.checkin),"d"));let p=g(u.checkout).diff(g(t),"d");for(let f=0;f<p;f++){let m=g(e).add(f,"d").format("YYYYMMDD");f==0&&(s="D"+m+"isfirst",c[s]=!0),g(this.resViewEndDate).isSame(m)&&(s="D"+m+"islast",c[s]=!0),s="D"+m+"blocked",c[s]=!1,s="D"+m+"starttruncated",c[s]=!n,s="D"+m+"endtruncated",c[s]=!o,s="D"+m+"resid",c[s]=u.id,s="D"+m+"start",c[s]=u.checkin,s="D"+m+"end",c[s]=u.checkout,s="D"+m+"customer",c[s]=u.customer_last,s="D"+m+"status",c[s]=u.status}}if(c&&c.children.length>0&&b.forEach(c.children,p=>{let f=b.find(i,m=>m.id==p);if(f){let m=g(u.checkout).diff(g(t),"d");for(let P=0;P<m;P++){let S=g(e).add(P,"d").format("YYYYMMDD");if(a="D"+S+"blocked",!f[a]){let T="D"+S+"blocked";f[T]=!0,T="D"+S+"span",f[T]=1,T="D"+S+"resIdRef",f[T]=u.id}}}}),c&&c.parents.length>0&&b.forEach(c.parents,p=>{let f=b.find(i,m=>m.id==p);if(f){let m=g(u.checkout).diff(g(t),"d");for(let P=0;P<m;P++){let S=g(e).add(P,"d").format("YYYYMMDD"),T="D"+S+"blocked";if(!f[T]){let R="D"+S+"blocked";f[R]=!0,R="D"+S+"span",f[R]=1,R="D"+S+"resIdRef",f[R]=u.id}}}}),u.is_assigned==0){console.log("iReservation @ handle unassigned"),console.table(u);let f="D"+g(u.checkin).format("YYYYMMDD")+"unassigned",m=b.find(i,P=>P.isUnassigned==1);m&&(m[f]?m[f].push(u):m[f]=[{...u}])}}}),i},tableHeight(){return this.windowHeight-108},tDateArray(){g.locale(this.locale.name);const e=[];for(let t=0;t<32;t++){let n={dayString:"D"+g(this.resViewStartDate).add(t,"day").format("YYYYMMDD"),dayLabel:g(this.resViewStartDate).add(t,"day").format("ddd MMM D")};e.push(n)}return e}},methods:{childrenHide(e){e.showChildren=0,b.each(e.children,t=>{console.log("childId",t);let n=b.find(this.rootSpaces,o=>o.id==t);console.log("m",n),n&&this.childrenHide(n)})},childrenShow(e){e.showChildren=1,b.each(e.children,t=>{b.find(this.rootSpaces,n=>n.id==t)})},clearReservations(){},closeReservationView(){this.showCreateReservation=!0,this.showReservationView=!1},emptyCellClick(e){console.log("empty cell selected",e)},getReservations(){const e=Z.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});Y.reservations.getReservationsByRange(this.resViewStartDate,this.resViewEndDate,this.token).then(t=>{e.close(),console.log("res fetch from rv3 getR()"),this.reservations=t.data.reservations,this.componentTrigger+=1}).catch(t=>{this.handleRequestError(t),this.reservations=[]})},leftPane100(){this.leftPaneSize=100},leftPane30(){this.leftPaneSize=30},leftPane50(){this.leftPaneSize=50},leftPane70(){this.leftPaneSize=70},leftPane10(){this.leftPaneSize=5},leftResize(e){console.log(e)},reservationSelected(e){const t=b.find(this.reservations,function(n){return n.id==e});this.selectedReservation={...t},this.showCreateReservation=!1,this.showReservationView=!0},rowClassName(e){},showCreateReservationFtn(){this.showCreateReservation=!0,this.showReservationView=!1},singleDateSelected(e){let t=g(e).format("YYYY-MM-DD");D().startDate=t,this.getReservations()},toggleShowChildren(e){let t=b.find(this.rootSpaces,n=>n.id==e);t.showChildren?this.childrenHide(t):this.childrenShow(t),D().setShowHideRootSpaceCopy(this.rootSpaces)},toggleCreateReservationDrawer(){this.showCreateReservationDrawer=!this.showCreateReservationDrawer},unassignedResSelected(e){const t=b.find(this.reservations,function(n){return n.id==e});this.selectedReservation={...t},this.showCreateReservation=!1,this.showReservationView=!0},updateSelectedReservation(e){this.selectedReservation=e},viewBack1(){const e=g(D().startDate).subtract(1,"days").format("YYYY-MM-DD");this.overRideSingleDatePicker=e},viewBack7(){const e=g(D().startDate).subtract(7,"days").format("YYYY-MM-DD");this.overRideSingleDatePicker=e},viewForward1(){const e=g(D().startDate).add(1,"days").format("YYYY-MM-DD");this.overRideSingleDatePicker=e},viewForward7(){const e=g(D().startDate).add(7,"days").format("YYYY-MM-DD");this.overRideSingleDatePicker=e}},created(){g.extend(g),g.extend(g),this.spaceRecords={}},mounted(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,window.addEventListener("resize",e=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight},!0),D().showHideRootSpaceCopy?this.rootSpaces=D().showHideRootSpaceCopy:this.rootSpaces=L().rootSpaces,this.getReservations()}},Yt={style:{display:"flex","flex-direction":"row-reverse"}},Tt={style:{"margin-left":"4px"}};function It(e,t,n,o,s,a){const i=d("el-button"),u=d("el-button-group"),c=d("CreateReservation"),p=d("ReservationView"),f=d("pane"),m=d("singleDatePicker"),P=d("ResViewTable"),S=d("splitpanes");return h(),y(S,{onResized:a.leftResize},{default:r(()=>[l(f,{size:s.leftPaneSize},{default:r(()=>[_("div",Yt,[l(u,null,{default:r(()=>[l(i,{type:"warning",onClick:a.leftPane10},{default:r(()=>[C("<<")]),_:1},8,["onClick"]),l(i,{type:"warning",onClick:a.leftPane30},{default:r(()=>[C("<")]),_:1},8,["onClick"]),l(i,{type:"warning",onClick:a.leftPane50},{default:r(()=>[C("|")]),_:1},8,["onClick"]),l(i,{type:"warning",onClick:a.leftPane70},{default:r(()=>[C(">")]),_:1},8,["onClick"]),l(i,{type:"warning",onClick:a.leftPane100},{default:r(()=>[C(">>")]),_:1},8,["onClick"])]),_:1})]),s.showCreateReservation?(h(),y(c,{key:0,"onCreateReservation:reloadReservations":a.getReservations},null,8,["onCreateReservation:reloadReservations"])):w("",!0),s.showReservationView?(h(),y(p,{key:1,selectedReservation:s.selectedReservation,"onReservationView:closeView":a.closeReservationView,"onReservationView:updateReservations":a.getReservations,"onReservationView:updateSelectedReservation":a.updateSelectedReservation},null,8,["selectedReservation","onReservationView:closeView","onReservationView:updateReservations","onReservationView:updateSelectedReservation"])):w("",!0)]),_:1},8,["size"]),l(f,{size:100-s.leftPaneSize},{default:r(()=>[_("div",Tt,[_("span",null,[l(u,null,{default:r(()=>[l(i,{type:"warning",onClick:a.viewBack7},{default:r(()=>[C("-7")]),_:1},8,["onClick"]),l(i,{type:"warning",onClick:a.viewBack1},{default:r(()=>[C("-1")]),_:1},8,["onClick"])]),_:1}),l(m,{overrideDate:s.overRideSingleDatePicker,"onSingleDatePicker:dateSelected":a.singleDateSelected},null,8,["overrideDate","onSingleDatePicker:dateSelected"]),l(u,null,{default:r(()=>[l(i,{type:"warning",onClick:a.viewForward1},{default:r(()=>[C("+1")]),_:1},8,["onClick"]),l(i,{type:"warning",onClick:a.viewForward7},{default:r(()=>[C("+7")]),_:1},8,["onClick"])]),_:1}),C("\xA0 "),l(i,{type:"success",onClick:a.showCreateReservationFtn},{default:r(()=>[C(v(e.$t("message.createReservation")),1)]),_:1},8,["onClick"])]),s.rootSpaces?(h(),y(P,{key:0,onResBlockClick:a.reservationSelected,onResviewToggleShowChildren:a.toggleShowChildren,onEmptyCellClick:a.emptyCellClick,onUnassignedResSelected:a.unassignedResSelected,tDateArray:a.tDateArray,tableData:a.resTableData,trigger:s.trigger,resSpaceCopy:e.spaceRecords,tableHeight:a.tableHeight},null,8,["onResBlockClick","onResviewToggleShowChildren","onEmptyCellClick","onUnassignedResSelected","tDateArray","tableData","trigger","resSpaceCopy","tableHeight"])):w("",!0)])]),_:1},8,["size"])]),_:1},8,["onResized"])}const At=z(Vt,[["render",It]]);export{At as default};
