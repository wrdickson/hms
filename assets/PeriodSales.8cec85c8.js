import{y as r,i as f,z as y,f as _,j as b,_ as S,c as h,d as o,e as p,b as e,w as d,m as T,F as D,r as u,o as c,t as Y}from"./index.33301253.js";import"./jspdf.plugin.autotable.11da63bd.js";const x={name:"PeriodSales",data(){return{endTime:r().format("YYYY MM DD")+" 23:59:59",reportGeneratedTime:null,startTime:r().format("YYYY MM DD"),salesReport:null}},computed:{account(){return f().account},endTimeF(){return r(this.endTime).format("YYYY-MM-DD HH:mm:ss")},startTimeF(){return r(this.startTime).format("YYYY-MM-DD HH:mm:ss")},siteName(){return y().autoloadOptions.site_name.option_value},token(){return f().token},formattedSalesReport(){let t=[];if(this.salesReport)return _.each(this.salesReport.all_included_sale_types,l=>{let a={title:"",subtotal:"",tax:"",total:""},s=_.find(this.salesReport.all_sale_types,n=>n.id==l);a.title=s.title,a.subtotal=parseFloat(this.salesReport.sale_subtotal_by_sale_type[l]).toFixed(2),a.tax=parseFloat(this.salesReport.sale_tax_total_by_sale_type[l]).toFixed(2),a.total=parseFloat(this.salesReport.sale_total_by_sale_type[l]).toFixed(2),t.push(a)}),t},formattedTaxReport(){let t=[];return _.each(this.salesReport.all_included_tax_types,l=>{let a={title:"",total:""},s=_.find(this.salesReport.all_tax_types,n=>n.id==l);a.id=s.id,a.title=s.tax_title,a.total=parseFloat(this.salesReport.tax_totals_by_tax_type[l]).toFixed(2),t.push(a)}),t}},methods:{clearReport(){this.salesReport=null,this.reportGeneratedTime=null,this.startTime=r().format("YYYY MM DD"),this.endTime=r().format("YYYY MM DD")+" 23:59:59"},runReport(){this.salesReport=null,this.reportGeneratedTime=r().format("YYYY-MM-DD HH-mm-ss"),b.reports.runSalesReport(this.startTimeF,this.endTimeF,this.token).then(t=>{console.table(t.data.sales_report.all_period_sales),this.salesReport=t.data.sales_report})}}},F=o("h1",null,"Period Sales",-1),M=o("hr",null,null,-1),k=o("hr",null,null,-1),V={key:0},w=o("br",null,null,-1),C={key:1},H=o("hr",null,null,-1),v=o("h3",null,"Sales By Sale Type: ",-1),z=o("hr",null,null,-1),B=o("h3",null,"Taxes By Tax Type: ",-1);function N(t,l){const a=u("el-date-picker"),s=u("el-button"),n=u("el-text"),i=u("el-table-column"),R=u("el-table");return c(),h(D,null,[F,o("div",null,[p(" Start: "),e(a,{modelValue:t.startTime,"onUpdate:modelValue":l[0]||(l[0]=m=>t.startTime=m),type:"datetime"},null,8,["modelValue"]),p(" End: "),e(a,{modelValue:t.endTime,"onUpdate:modelValue":l[1]||(l[1]=m=>t.endTime=m),type:"datetime"},null,8,["modelValue"])]),M,e(s,{onClick:t.clearReport,type:"primary"},{default:d(()=>[p("Clear Report")]),_:1},8,["onClick"]),e(s,{type:"primary",onClick:t.runReport},{default:d(()=>[p("Run Report")]),_:1},8,["onClick"]),k,t.salesReport?(c(),h("div",V,[e(n,{size:"large"},{default:d(()=>[p("Start: "+Y(t.salesReport.report_start),1)]),_:1}),w,e(n,{size:"large"},{default:d(()=>[p("End: "+Y(t.salesReport.report_end),1)]),_:1})])):T("",!0),t.formattedSalesReport&&t.formattedTaxReport?(c(),h("div",C,[H,v,e(R,{size:"small",data:t.formattedSalesReport},{default:d(()=>[e(i,{width:"220",prop:"title",label:"Sale Type"}),e(i,{width:"100",prop:"subtotal",label:"Subtotal"}),e(i,{width:"100",prop:"tax",label:"Tax"}),e(i,{width:"100",prop:"total",label:"Total"})]),_:1},8,["data"]),z,B,e(R,{size:"small",data:t.formattedTaxReport},{default:d(()=>[e(i,{width:"220",prop:"title",label:"Tax Type"}),e(i,{width:"100",prop:"total",label:"Total"})]),_:1},8,["data"])])):T("",!0)],64)}const E=S(x,[["render",N]]);export{E as default};
