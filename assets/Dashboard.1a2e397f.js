import{_ as w,f as V,r,o as u,g as T,w as s,d as C,t as c,b as l,e as y,c as f,F as $,h as E,i as G,j as S,k as I,E as g,l as M,m as b,n as P,s as U,p as N,q as Y,u as F,v as R}from"./index.33301253.js";import{r as O}from"./resView.65ec67a9.js";const H={name:"RootspaceTree",props:["rootSpaces"],emits:["node-selected"],data(){return{defaultProps:{children:"children",label:"label"},selectedNode:null}},computed:{allKeys(){let e=[];return V.forEach(this.rootSpaces,t=>{e.push(t.id)}),e},tData(){let e=a=>{let n=V.filter(this.rootSpaces,o=>o.childOf==a),i=[];return V.forEach(n,o=>{let m={id:o.id,label:o.title+" ("+o.displayOrder+" | "+o.showChildren+" )",children:e(o.id)};i.push(m)}),i},t=[];return V.forEach(this.rootSpaces,a=>{if(a.childOf==0){let n={id:a.id,label:a.title+" ("+a.displayOrder+" | "+a.showChildren+" )",children:e(a.id)};t.push(n)}}),t}},methods:{handleNodeClick(e,t,a,n){let i=V.find(this.rootSpaces,o=>o.id==e.id);this.selectedNode=i,this.$emit("node-selected",this.selectedNode)}}};function K(e,t,a,n,i,o){const m=r("el-tree");return u(),T(m,{data:o.tData,props:i.defaultProps,"node-key":"id","default-expanded-keys":o.allKeys,onNodeClick:o.handleNodeClick},null,8,["data","props","default-expanded-keys","onNodeClick"])}const Z=w(H,[["render",K]]),J={name:"editRootSpace",props:["rootSpaces","spaceTypes","selectedSpace"],emits:["update-space","emit-close","delete-space"],data(){return{bedsArr:[1,2,3,4,5,6,7,8,9,10],peopleArr:[0,1,2,3,4,5,6,7,8,9,10],showSpaceEdit:!1,selectedSpaceCopy:{id:this.selectedSpace.id,beds:this.selectedSpace.beds,childOf:this.selectedSpace.childOf,children:this.selectedSpace.children,displayOrder:this.selectedSpace.displayOrder,isActive:this.selectedSpace.isActive.toString(),parents:this.selectedSpace.parents,people:this.selectedSpace.people,showChildren:this.selectedSpace.showChildren.toString(),title:this.selectedSpace.title,spaceType:this.selectedSpace.spaceType}}},computed:{i18Beds(){return this.$i18n.t("message.beds")},i18ChildOf(){return this.$i18n.t("message.childOf")},i18ConfirmDelete(){return this.$i18n.t("message.confirmDelete")},i18DeleteSpace(){return this.$i18n.t("message.delete")+" "+this.$i18n.t("message.spaceLabel")},i18DisplayOrder(){return this.$i18n.t("message.displayOrder")},i18False(){return this.$i18n.t("message.false")},i18No(){return this.$i18n.t("message.no")},i18People(){return this.$i18n.t("message.people")},i18ShowChildren(){return this.$i18n.t("message.showChildren")},i18True(){return this.$i18n.t("message.true")},i18Title(){return this.$i18n.t("message.title")},i18Type(){return this.$i18n.t("message.type")},i18Yes(){return this.$i18n.t("message.yes")},i18IsActive(){return this.$i18n.t("message.isActive")}},methods:{deleteSpace(){this.$emit("delete-space",this.selectedSpace)},emitClose(){this.$emit("emit-close")},updateSpace(){this.$emit("update-space",this.selectedSpaceCopy)}},created(){}};const Q={class:"card-header"};function W(e,t){const a=r("el-button"),n=r("el-input"),i=r("el-form-item"),o=r("el-option"),m=r("el-select"),h=r("el-form"),p=r("el-divider"),d=r("el-popconfirm"),A=r("el-card");return u(),T(A,null,{header:s(()=>[C("div",Q,[C("span",null,c(e.$t("message.editSpace")),1),l(a,{class:"button",size:"small",onClick:e.emitClose},{default:s(()=>[y(c(e.$t("message.close")),1)]),_:1},8,["onClick"])])]),default:s(()=>[l(h,{model:e.selectedSpaceCopy,size:"small","label-position":"right","label-width":"160px"},{default:s(()=>[l(i,{label:e.i18Title},{default:s(()=>[l(n,{modelValue:e.selectedSpaceCopy.title,"onUpdate:modelValue":t[0]||(t[0]=v=>e.selectedSpaceCopy.title=v)},null,8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.i18IsActive},{default:s(()=>[l(m,{modelValue:e.selectedSpaceCopy.isActive,"onUpdate:modelValue":t[1]||(t[1]=v=>e.selectedSpaceCopy.isActive=v),placeholder:"Select"},{default:s(()=>[l(o,{label:e.i18True,value:"1"},null,8,["label"]),l(o,{label:e.i18False,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.i18Type},{default:s(()=>[l(m,{modelValue:e.selectedSpaceCopy.spaceType,"onUpdate:modelValue":t[2]||(t[2]=v=>e.selectedSpaceCopy.spaceType=v)},{default:s(()=>[(u(!0),f($,null,E(e.spaceTypes,v=>(u(),T(o,{label:v.title,value:v.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.i18DisplayOrder},{default:s(()=>[l(n,{modelValue:e.selectedSpaceCopy.displayOrder,"onUpdate:modelValue":t[3]||(t[3]=v=>e.selectedSpaceCopy.displayOrder=v)},null,8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.i18ShowChildren},{default:s(()=>[l(m,{modelValue:e.selectedSpaceCopy.showChildren,"onUpdate:modelValue":t[4]||(t[4]=v=>e.selectedSpaceCopy.showChildren=v),placeholder:"Select"},{default:s(()=>[l(o,{label:e.i18True,value:"1"},null,8,["label"]),l(o,{label:e.i18False,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.i18People},{default:s(()=>[l(m,{modelValue:e.selectedSpaceCopy.people,"onUpdate:modelValue":t[5]||(t[5]=v=>e.selectedSpaceCopy.people=v)},{default:s(()=>[(u(!0),f($,null,E(e.peopleArr,v=>(u(),T(o,{label:v,value:v},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.i18Beds},{default:s(()=>[l(m,{modelValue:e.selectedSpaceCopy.beds,"onUpdate:modelValue":t[6]||(t[6]=v=>e.selectedSpaceCopy.beds=v)},{default:s(()=>[(u(!0),f($,null,E(e.bedsArr,v=>(u(),T(o,{label:v,value:v},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(i,null,{default:s(()=>[l(a,{type:"primary",onClick:e.updateSpace},{default:s(()=>[y(c(e.$t("message.update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),l(p),C("div",null,[l(d,{title:e.i18ConfirmDelete,"confirm-button-text":e.i18Yes,"cancel-button-text":e.i18No,onConfirm:e.deleteSpace},{reference:s(()=>[l(a,{size:"small",style:{float:"right","margin-top":"-15px","margin-bottom":"10px"},type:"danger"},{default:s(()=>[y(c(e.i18DeleteSpace),1)]),_:1})]),_:1},8,["title","confirm-button-text","cancel-button-text","onConfirm"])])]),_:1})}const X=w(J,[["render",W]]);const x={name:"createRootSpace",props:["rootSpaces","spaceTypes"],data(){return{bedsArr:[1,2,3,4,5,6,7,8,9,10],peopleArr:[0,1,2,3,4,5,6,7,8,9,10],form:{title:null,childOf:null,spaceType:null,displayOrder:null,showChildren:null,people:null,beds:null,isActive:"1"}}},computed:{i18Beds(){return this.$i18n.t("message.beds")},i18ChildOf(){return this.$i18n.t("message.childOf")},i18ConfirmDelete(){return this.$i18n.t("message.confirmDelete")},i18CreateSpace(){return this.$i18n.t("message.createSpace")},i18DeleteSpace(){return this.$i18n.t("message.delete")+" "+this.$i18n.t("message.spaceLabel")},i18DisplayOrder(){return this.$i18n.t("message.displayOrder")},i18False(){return this.$i18n.t("message.false")},i18No(){return this.$i18n.t("message.no")},i18People(){return this.$i18n.t("message.people")},i18ShowChildren(){return this.$i18n.t("message.showChildren")},i18True(){return this.$i18n.t("message.true")},i18Title(){return this.$i18n.t("message.title")},i18Type(){return this.$i18n.t("message.type")},i18Yes(){return this.$i18n.t("message.yes")},i18IsActive(){return this.$i18n.t("message.isActive")}},methods:{createSpace(){this.$emit("create-space",this.form)},emitClose(){this.$emit("emit-close")}},created(){}},j={class:"card-header"};function ee(e,t,a,n,i,o){const m=r("el-button"),h=r("el-input"),p=r("el-form-item"),d=r("el-option"),A=r("el-select"),v=r("el-form"),D=r("el-card");return u(),T(D,null,{header:s(()=>[C("div",j,[C("span",null,c(e.$t("message.createSpace")),1),l(m,{class:"button",size:"small",onClick:o.emitClose},{default:s(()=>[y(c(e.$t("message.close")),1)]),_:1},8,["onClick"])])]),default:s(()=>[l(v,{model:i.form,size:"small","label-position":"right","label-width":"160px"},{default:s(()=>[l(p,{label:o.i18Title},{default:s(()=>[l(h,{modelValue:i.form.title,"onUpdate:modelValue":t[0]||(t[0]=_=>i.form.title=_)},null,8,["modelValue"])]),_:1},8,["label"]),l(p,{label:o.i18IsActive},{default:s(()=>[l(A,{modelValue:i.form.isActive,"onUpdate:modelValue":t[1]||(t[1]=_=>i.form.isActive=_),placeholder:"Select"},{default:s(()=>[l(d,{label:o.i18True,value:"1"},null,8,["label"]),l(d,{label:o.i18False,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(p,{label:o.i18ChildOf},{default:s(()=>[l(A,{modelValue:i.form.childOf,"onUpdate:modelValue":t[2]||(t[2]=_=>i.form.childOf=_),placeholder:"Select"},{default:s(()=>[l(d,{label:"0",value:"0"}),(u(!0),f($,null,E(a.rootSpaces,_=>(u(),T(d,{label:_.title,value:_.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(p,{label:o.i18Type},{default:s(()=>[l(A,{modelValue:i.form.spaceType,"onUpdate:modelValue":t[3]||(t[3]=_=>i.form.spaceType=_)},{default:s(()=>[(u(!0),f($,null,E(a.spaceTypes,_=>(u(),T(d,{label:_.title,value:_.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(p,{label:o.i18DisplayOrder},{default:s(()=>[l(h,{modelValue:i.form.displayOrder,"onUpdate:modelValue":t[4]||(t[4]=_=>i.form.displayOrder=_)},null,8,["modelValue"])]),_:1},8,["label"]),l(p,{label:o.i18ShowChildren},{default:s(()=>[l(A,{modelValue:i.form.showChildren,"onUpdate:modelValue":t[5]||(t[5]=_=>i.form.showChildren=_),placeholder:"Select"},{default:s(()=>[l(d,{label:o.i18True,value:"1"},null,8,["label"]),l(d,{label:o.i18False,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(p,{label:o.i18People},{default:s(()=>[l(A,{modelValue:i.form.people,"onUpdate:modelValue":t[6]||(t[6]=_=>i.form.people=_)},{default:s(()=>[(u(!0),f($,null,E(i.peopleArr,_=>(u(),T(d,{label:_,value:_},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(p,{label:o.i18Beds},{default:s(()=>[l(A,{modelValue:i.form.beds,"onUpdate:modelValue":t[7]||(t[7]=_=>i.form.beds=_)},{default:s(()=>[(u(!0),f($,null,E(i.bedsArr,_=>(u(),T(d,{label:_,value:_},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(p,null,{default:s(()=>[l(m,{onClick:o.createSpace},{default:s(()=>[y(c(e.$t("message.createSpace")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1})}const te=w(x,[["render",ee]]),le={name:"SpaceEdit",components:{editRootSpace:X,RootSpaceTree:Z,createRootSpace:te},data(){return{selectedSpace:null,showCreateSpace:!1,rootSpaces:null,spaceTypes:null,isLoading:!1}},computed:{$i18ErrorNoAction(){return this.$i18n.t("message.errorNoAction")},$i18SpaceCreated(){return this.$i18n.t("message.spaceCreated")},$i18SpaceDeleted(){return this.$i18n.t("message.spaceDeleted")},token(){return G().token},account(){return G().account}},created(){},methods:{createSpace(e){const t=e.beds,a=e.childOf,n=e.displayOrder,i=e.people,o=e.showChildren,m=e.spaceType,h=e.title,p=e.isActive;S.rootSpaces.createRootSpace(this.token,t,a,n,i,o,m,h,p).then(d=>{if(d.data.create>0){const A=V.sortBy(d.data.root_spaces_children_parents,"displayOrder");this.rootSpaces=A,I().setRootSpaces(A),g({type:"success",message:this.$i18SpaceCreated})}else g({type:"error",mesage:this.$i18ErrorNoAction})})},deleteSpace(e){console.log("d:",e),S.rootSpaces.deleteRootSpace(this.token,e.id).then(t=>{if(t.data.delete.execute_delete==!0){const a=V.sortBy(t.data.root_spaces_children_parents,"display_order");this.rootSpaces=a,O().setShowHideRootSpaceCopy(null),I().setRootSpaces(a),g({type:"success",message:this.$i18SpaceDeleted})}else g({type:"error",message:this.$i18ErrorNoAction})})},nodeSelected(e){this.selectedSpace=e},unselectSpace(){this.selectedSpace=null},updateSpace(e){const t=M.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});S.rootSpaces.updateRootSpace(this.token,e).then(a=>{t.close(),console.table(a.data);const n=V.sortBy(a.data.root_spaces_children_parents,"displayOrder");this.rootSpaces=n,O().setShowHideRootSpaceCopy(null),I().setRootSpaces(n),g({type:"success",message:"space updated"})}).catch(a=>{t.close(),g({type:"error",message:a})})}},mounted(){S.rootSpaces.getRootSpaces(this.token).then(e=>{this.rootSpaces=e.data.root_spaces_children_parents}),S.spaceTypes.getSpaceTypes().then(e=>{console.log("st response",e),this.spaceTypes=e.data.space_types})}},ae=C("p",{style:{color:"#ff0000"}},"This is for setup only. If we are actually editing/ adding/ removing in a situation where we had reservations in db, we would need to recalculate all reservations to reflect changes. Probably move some to an 'unassigned' category. Complicated.",-1);function se(e,t,a,n,i,o){const m=r("el-button"),h=r("el-divider"),p=r("rootSpaceTree"),d=r("el-col"),A=r("editRootSpace"),v=r("createRootSpace"),D=r("el-row");return u(),T(D,null,{default:s(()=>[l(d,{span:12},{default:s(()=>[l(m,{onClick:t[0]||(t[0]=_=>(i.showCreateSpace=!0,i.selectedSpace=null)),type:"primary",size:"small"},{default:s(()=>[y(c(e.$t("message.createSpace")),1)]),_:1}),l(h),i.rootSpaces?(u(),T(p,{key:0,rootSpaces:i.rootSpaces,onNodeSelected:o.nodeSelected},null,8,["rootSpaces","onNodeSelected"])):b("",!0)]),_:1}),l(d,{span:12},{default:s(()=>[ae,i.rootSpaces&&i.spaceTypes&&i.selectedSpace?(u(),T(A,{key:0,rootSpaces:i.rootSpaces,spaceTypes:i.spaceTypes,selectedSpace:i.selectedSpace,onUpdateSpace:o.updateSpace,onEmitClose:o.unselectSpace,onDeleteSpace:o.deleteSpace},null,8,["rootSpaces","spaceTypes","selectedSpace","onUpdateSpace","onEmitClose","onDeleteSpace"])):b("",!0),i.rootSpaces&&i.spaceTypes&&i.showCreateSpace?(u(),T(v,{key:1,rootSpaces:i.rootSpaces,spaceTypes:i.spaceTypes,onEmitClose:t[1]||(t[1]=_=>i.showCreateSpace=!1),onCreateSpace:o.createSpace},null,8,["rootSpaces","spaceTypes","onCreateSpace"])):b("",!0)]),_:1})]),_:1})}const re=w(le,[["render",se]]),ne={name:"TableTaxTypes",props:["reloadTrigger"],emits:["tableTaxTypes:taxTypeSelected"],data(){return{cellStyle:{padding:"5px"},selctedTaxType:{},taxTypes:[],tstriped:!0}},computed:{token(){return G().token}},methods:{getTaxTypes(){S.taxTypes.getTaxTypes(this.token).then(e=>{this.taxTypes=e.data.all_tax_types})},rowSelected(e){console.log("selected"),this.$emit("tableTaxTypes:taxTypeSelected",{...e})}},mounted(){this.getTaxTypes()},watch:{reloadTrigger(e,t){this.getTaxTypes()}}};const ie=C("p",null,"Tax Types",-1);function oe(e,t){const a=r("el-table-column"),n=r("el-table");return u(),f($,null,[ie,l(n,{data:e.taxTypes,stripe:"","highlight-current-row":"",height:"500",size:"small",style:{width:"100%"},"cell-class-name":"t-table-cell","table-layout":"auto",onRowClick:e.rowSelected},{default:s(()=>[l(a,{prop:"id",label:"Id",width:"50"}),l(a,{prop:"tax_title",label:"Title",width:"150"}),l(a,{prop:"tax_rate",label:"Tax Rate",width:"100"}),l(a,{prop:"is_current",label:"Is Current",width:"80"}),l(a,{prop:"display_order",label:"Display Order",width:"150"})]),_:1},8,["data","onRowClick"])],64)}const pe=w(ne,[["render",oe]]),de={name:"EditTaxTypes",props:["selectedTaxType"],emits:["editTaxType-close","editTaxType-update","editTaxType:delete"],data(){return{eTaxType:null,rules:{tax_title:[{required:!0,message:"Tax title is required",trigger:"change"},{min:4,max:24,message:"4 to 24",trigger:"change"}],tax_rate:[{required:!0,message:"Tax rate is required"},{validator:this.isFloat,trigger:"change"}],display_order:[{required:!0,message:"Display order title is required",trigger:"change"},{validator:this.isInteger,message:"Display order must be a number",trigger:"change"},{validator:this.isGreaterThan1,message:"Display order must be at least 1",trigger:"change"}]}}},computed:{i18nClose(){return this.$i18n.t("message.close")},i18nDisplayOrder(){return this.$i18n.t("message.displayOrder")},i18nEdit(){return this.$i18n.t("message.edit")},i18nFalse(){return this.$i18n.t("message.false")},i18nIsCurrent(){return this.$i18n.t("message.isCurrent")},i18nTaxRate(){return this.$i18n.t("message.taxRate")},i18nTaxTitle(){return this.$i18n.t("message.taxTitle")},i18nTaxType(){return this.$i18n.t("message.taxType")},i18nTrue(){return this.$i18n.t("message.true")},i18nUpdateTaxType(){return this.$i18n.t("message.updateTaxType")}},methods:{close(){this.$emit("editTaxType-close")},deleteTaxType(){console.log("del"),this.$emit("editTaxType:delete",{...this.eTaxType})},updateTaxType(e){this.$refs[e].validate(t=>{t?this.$emit("editTaxType-update",{...this.eTaxType}):console.log("not valid")})},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()}},created(){},mounted(){this.eTaxType=this.selectedTaxType,this.eTaxType.is_current=this.selectedTaxType.is_current.toString()},watch:{selectedTaxType(e){this.eTaxType=e,this.eTaxType.is_current=e.is_current.toString()}}},ue={key:0},ce=C("hr",null,null,-1);function me(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-form"),p=r("el-popconfirm");return e.eTaxType?(u(),f("div",ue,[C("div",null,c(e.i18nEdit)+"\xA0"+c(e.i18nTaxType),1),l(h,{model:e.eTaxType,"label-width":"120px",rules:e.rules,ref:"taxFormRef"},{default:s(()=>[l(n,{label:e.i18nTaxTitle,prop:"tax_title"},{default:s(()=>[l(a,{modelValue:e.eTaxType.tax_title,"onUpdate:modelValue":t[0]||(t[0]=d=>e.eTaxType.tax_title=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nIsCurrent},{default:s(()=>[l(o,{modelValue:e.eTaxType.is_current,"onUpdate:modelValue":t[1]||(t[1]=d=>e.eTaxType.is_current=d),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nTaxRate,prop:"tax_rate"},{default:s(()=>[l(a,{modelValue:e.eTaxType.tax_rate,"onUpdate:modelValue":t[2]||(t[2]=d=>e.eTaxType.tax_rate=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nDisplayOrder,prop:"display_order"},{default:s(()=>[l(a,{modelValue:e.eTaxType.display_order,"onUpdate:modelValue":t[3]||(t[3]=d=>e.eTaxType.display_order=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"primary",onClick:e.close},{default:s(()=>[y(c(e.i18nClose),1)]),_:1},8,["onClick"]),l(m,{type:"success",onClick:t[4]||(t[4]=d=>e.updateTaxType("taxFormRef"))},{default:s(()=>[y(c(e.i18nUpdateTaxType),1)]),_:1})]),_:1})]),_:1},8,["model","rules"]),ce,l(p,{title:"Are you sure to delete this?",onConfirm:e.deleteTaxType},{reference:s(()=>[l(m,{type:"danger"},{default:s(()=>[y("Delete")]),_:1})]),_:1},8,["onConfirm"])])):b("",!0)}const ye=w(de,[["render",me]]),Te={name:"CreateTaxType",emits:["createTaxType:create","createTaxType:close"],data(){return{cTaxType:{tax_title:"",tax_rate:"",is_current:"1",display_order:"0"},rules:{tax_title:[{required:!0,message:"Tax title is required",trigger:"change"},{min:3,max:22,message:"3 to 22 characters",trigger:"change"}],tax_rate:[{required:!0,message:"Tax rate is required",trigger:"change"},{validator:this.isFloat,message:"Tax rate must be a float",trigger:"change"}],display_order:[{required:!0,message:"Display order title is required",trigger:"change"},{validator:this.isInteger,message:"Display order must be a number",trigger:"change"},{validator:this.isGreaterThan1,message:"Display order must be at least 1",trigger:"change"}]}}},computed:{i18nClose(){return this.$i18n.t("message.close")},i18nCreate(){return this.$i18n.t("message.create")},i18nDisplayOrder(){return this.$i18n.t("message.displayOrder")},i18nFalse(){return this.$i18n.t("message.false")},i18nIsCurrent(){return this.$i18n.t("message.isCurrent")},i18nTaxRate(){return this.$i18n.t("message.taxRate")},i18nTaxTitle(){return this.$i18n.t("message.taxTitle")},i18nTaxType(){return this.$i18n.t("message.taxType")},i18nTrue(){return this.$i18n.t("message.true")}},methods:{createTaxType(e){this.$refs[e].validate(t=>{t?this.$emit("createTaxType:create",{...this.cTaxType}):console.log("not valid")})},close(){this.cTaxType={tax_title:"",tax_rate:"",is_current:"1",display_order:"0"},this.$emit("createTaxType:close")},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()}}};function ge(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-form");return u(),f($,null,[C("div",null,c(e.i18nCreate)+"\xA0"+c(e.i18nTaxType),1),l(h,{model:e.cTaxType,"label-width":"120px",rules:e.rules,ref:"createTaxTypeRef"},{default:s(()=>[l(n,{label:e.i18nTaxTitle,prop:"tax_title"},{default:s(()=>[l(a,{modelValue:e.cTaxType.tax_title,"onUpdate:modelValue":t[0]||(t[0]=p=>e.cTaxType.tax_title=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nIsCurrent},{default:s(()=>[l(o,{modelValue:e.cTaxType.is_current,"onUpdate:modelValue":t[1]||(t[1]=p=>e.cTaxType.is_current=p),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nTaxRate,prop:"tax_rate"},{default:s(()=>[l(a,{modelValue:e.cTaxType.tax_rate,"onUpdate:modelValue":t[2]||(t[2]=p=>e.cTaxType.tax_rate=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nDisplayOrder,prop:"display_order"},{default:s(()=>[l(a,{modelValue:e.cTaxType.display_order,"onUpdate:modelValue":t[3]||(t[3]=p=>e.cTaxType.display_order=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"danger",onClick:e.close},{default:s(()=>[y(c(e.i18nClose),1)]),_:1},8,["onClick"]),l(m,{type:"success",onClick:t[4]||(t[4]=p=>e.createTaxType("createTaxTypeRef"))},{default:s(()=>[y(c(e.i18nCreate)+"\xA0"+c(e.i18nTaxType),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])],64)}const he=w(Te,[["render",ge]]),fe={name:"TaxTypes",components:{TableTaxTypes:pe,EditTaxTypes:ye,CreateTaxType:he},data(){return{reloadTrigger:1,selectedTaxType:null,displayCreateTaxType:!1}},computed:{i18nCreate(){return this.$i18n.t("message.create")},i18nTaxType(){return this.$i18n.t("message.taxType")},token(){return G().token}},methods:{closeCreateTaxType(){this.displayCreateTaxType=!1},createTaxType(e){e.is_current=parseInt(e.is_current),e.display_order=parseInt(e.display_order),e.tax_rate=parseFloat(e.tax_rate),console.table(e),S.taxTypes.createTaxType(this.token,e).then(t=>{t.data.create==!0?(P().setTaxTypes(t.data.all_tax_types),this.reloadTrigger+=1,g({type:"success",message:"Tax type was created."}),this.displayCreateTaxType=!1):g({type:"danger",message:"Error! Not created."})})},closeEditTaxTypes(){this.selectedTaxType=null},deleteTaxType(e){console.log(e),S.taxTypes.deleteTaxType(this.token,e).then(t=>{t.data.delete==!0?(P().setTaxTypes(t.data.all_tax_types),this.reloadTrigger+=1,g({type:"success",message:"Tax type was deleted."})):g({type:"danger",message:"Error!  Not deleted."})})},showCreateTaxType(){this.displayCreateTaxType=!0,this.selectedTaxType=null},taxTypeSelected(e){this.selectedTaxType=e,this.displayCreateTaxType=!1},taxTypeUpdate(e){e.is_current=parseInt(e.is_current),e.tax_rate=parseFloat(e.tax_rate),e.display_order=parseInt(e.display_order),S.taxTypes.updateTaxType(this.token,e).then(t=>{t.data.update==!0?(P().setTaxTypes(t.data.all_tax_types),this.reloadTrigger+=1,g({type:"success",message:"Tax type was updated."})):g({type:"danger",message:"Error!  Not updated."})})}}},_e=C("p",{style:{color:"red"}},"As with spaces, this currently lets the user delete and update willy nilly. Need to make sure it doesn't compromise data.",-1);function Se(e,t){const a=r("el-col"),n=r("el-row"),i=r("el-button"),o=r("TableTaxTypes"),m=r("EditTaxTypes"),h=r("CreateTaxType");return u(),f($,null,[l(n,null,{default:s(()=>[l(a,{xs:24},{default:s(()=>[_e]),_:1})]),_:1}),l(n,null,{default:s(()=>[l(a,{xs:24},{default:s(()=>[l(i,{type:"primary",onClick:e.showCreateTaxType},{default:s(()=>[y(c(e.i18nCreate)+"\xA0"+c(e.i18nTaxType),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),l(n,null,{default:s(()=>[l(a,{xs:24,sm:12},{default:s(()=>[l(o,{reloadTrigger:e.reloadTrigger,"onTableTaxTypes:taxTypeSelected":e.taxTypeSelected},null,8,["reloadTrigger","onTableTaxTypes:taxTypeSelected"])]),_:1}),l(a,{xs:24,sm:12},{default:s(()=>[e.selectedTaxType?(u(),T(m,{key:0,selectedTaxType:e.selectedTaxType,onEditTaxTypeClose:e.closeEditTaxTypes,onEditTaxTypeUpdate:e.taxTypeUpdate,"onEditTaxType:delete":e.deleteTaxType},null,8,["selectedTaxType","onEditTaxTypeClose","onEditTaxTypeUpdate","onEditTaxType:delete"])):b("",!0),e.displayCreateTaxType?(u(),T(h,{key:1,"onCreateTaxType:create":e.createTaxType,"onCreateTaxType:close":e.closeCreateTaxType},null,8,["onCreateTaxType:create","onCreateTaxType:close"])):b("",!0)]),_:1})]),_:1})],64)}const be=w(fe,[["render",Se]]),Ce={name:"TableSaleTypeGroups",props:["reloadTrigger"],emits:["tableSaleTypeGroups:saleTypeGroupSelected"],data(){return{cellStyle:{padding:"5px"},selctedSaleTypeGroup:{},saleTypeGroups:[],tstriped:!0}},computed:{token(){return G().token}},methods:{getSaleTypeGroups(){S.saleTypeGroups.getSaleTypeGroups(this.token).then(e=>{this.saleTypeGroups=e.data.all_sale_type_groups})},rowSelected(e){console.log("selected"),this.$emit("tableSaleTypeGroups:saleTypeGroupSelected",{...e})}},mounted(){this.getSaleTypeGroups()},watch:{reloadTrigger(e,t){this.getSaleTypeGroups()}}};function we(e,t){const a=r("el-table-column"),n=r("el-table");return u(),T(n,{data:e.saleTypeGroups,stripe:"","highlight-current-row":"",height:"500",size:"small",style:{width:"100%"},"cell-class-name":"t-table-cell","table-layout":"auto",onRowClick:e.rowSelected},{default:s(()=>[l(a,{prop:"id",label:"Id"}),l(a,{prop:"title",label:"Title"}),l(a,{prop:"is_active",label:"Is Active"}),l(a,{prop:"display_order",label:"Display Order"})]),_:1},8,["data","onRowClick"])}const ve=w(Ce,[["render",we]]),$e={name:"EditSaleTypeGroup",props:["selectedSaleTypeGroup"],emits:["editSaleTypeGroup-close","editSaleTypeGroup-update","editSaleTypeGroup:delete"],data(){return{eSaleTypeGroup:null,rules:{title:[{required:!0,message:"Group title is required",trigger:"change"},{min:4,max:24,message:"4 to 24",trigger:"change"}],display_order:[{required:!0,message:"Display order title is required",trigger:"change"},{validator:this.isInteger,message:"Display order must be a number",trigger:"change"},{validator:this.isGreaterThan1,message:"Display order must be at least 1",trigger:"change"}]}}},computed:{i18nClose(){return this.$i18n.t("message.close")},i18nDisplayOrder(){return this.$i18n.t("message.displayOrder")},i18nEdit(){return this.$i18n.t("message.edit")},i18nFalse(){return this.$i18n.t("message.false")},i18nIsCurrent(){return this.$i18n.t("message.isCurrent")},i18nTaxRate(){return this.$i18n.t("message.taxRate")},i18nFoo(){return this.$i18n.t("message.stTitle")},i18nSaleTypeGroup(){return this.$i18n.t("message.saleTypeGroup")},i18nTrue(){return this.$i18n.t("message.true")},i18nUpdate(){return this.$i18n.t("message.update")}},methods:{close(){this.$emit("editSaleTypeGroup-close")},deleteSaleTypeGroup(){console.log("del"),this.$emit("editSaleTypeGroup:delete",{...this.eSaleTypeGroup})},updateSaleTypeGroup(e){this.$refs[e].validate(t=>{t?this.$emit("editSaleTypeGroup-update",{...this.eSaleTypeGroup}):console.log("not valid")})},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()}},created(){},mounted(){this.eSaleTypeGroup=this.selectedSaleTypeGroup,this.eSaleTypeGroup.is_active=this.selectedSaleTypeGroup.is_active.toString()},watch:{selectedSaleTypeGroup(e){this.eSaleTypeGroup=e,this.eSaleTypeGroup.is_active=e.is_active.toString()}}},Ae={key:0},Ve=C("hr",null,null,-1);function Ee(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-form"),p=r("el-popconfirm");return e.eSaleTypeGroup?(u(),f("div",Ae,[C("div",null,c(e.i18nEdit)+"\xA0"+c(e.i18nSaleTypeGroup),1),l(h,{model:e.eSaleTypeGroup,"label-width":"120px",rules:e.rules,ref:"saleGroupRef"},{default:s(()=>[l(n,{label:e.i18nFoo,prop:"title"},{default:s(()=>[l(a,{modelValue:e.eSaleTypeGroup.title,"onUpdate:modelValue":t[0]||(t[0]=d=>e.eSaleTypeGroup.title=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nIsCurrent},{default:s(()=>[l(o,{modelValue:e.eSaleTypeGroup.is_active,"onUpdate:modelValue":t[1]||(t[1]=d=>e.eSaleTypeGroup.is_active=d),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nDisplayOrder,prop:"display_order"},{default:s(()=>[l(a,{modelValue:e.eSaleTypeGroup.display_order,"onUpdate:modelValue":t[2]||(t[2]=d=>e.eSaleTypeGroup.display_order=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"primary",onClick:e.close},{default:s(()=>[y(c(e.i18nClose),1)]),_:1},8,["onClick"]),l(m,{type:"success",onClick:t[3]||(t[3]=d=>e.updateSaleTypeGroup("saleGroupRef"))},{default:s(()=>[y(c(e.i18nUpdate),1)]),_:1})]),_:1})]),_:1},8,["model","rules"]),Ve,l(p,{title:"Are you sure to delete this?",onConfirm:e.deleteSaleTypeGroup},{reference:s(()=>[l(m,{type:"danger"},{default:s(()=>[y("Delete")]),_:1})]),_:1},8,["onConfirm"])])):b("",!0)}const Ge=w($e,[["render",Ee]]),Pe={name:"CreateSaleTypeGroup",emits:["createSaleTypeGroup:create","createSaleTypeGroup:close"],data(){return{cSaleTypeGroup:{title:"",is_active:"1",display_order:"0"},rules:{title:[{required:!0,message:"Title is required",trigger:"change"},{min:4,max:24,message:"4 to 24 characters",trigger:"change"}],display_order:[{required:!0,message:"Display order title is required",trigger:"change"},{validator:this.isInteger,message:"Display order must be a number",trigger:"change"},{validator:this.isGreaterThan1,message:"Display order must be at least 1",trigger:"change"}]}}},computed:{i18nClose(){return this.$i18n.t("message.close")},i18nCreate(){return this.$i18n.t("message.create")},i18nDisplayOrder(){return this.$i18n.t("message.displayOrder")},i18nFalse(){return this.$i18n.t("message.false")},i18nIsActive(){return this.$i18n.t("message.isActive")},i18nTaxRate(){return this.$i18n.t("message.taxRate")},i18nBlah(){return this.$i18n.t("message.stTitle")},i18nSaleTypeGroup(){return this.$i18n.t("message.saleTypeGroup")},i18nTrue(){return this.$i18n.t("message.true")}},methods:{createSaleTypeGroup(e){this.$refs[e].validate(t=>{t?this.$emit("createSaleTypeGroup:create",{...this.cSaleTypeGroup}):console.log("not valid")})},close(){this.cSaleTypeGroup={title:"",is_active:"1",display_order:"0"},this.$emit("createSaleTypeGroup:close")},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()}}};function ke(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-form");return u(),f($,null,[C("div",null,c(e.i18nCreate)+"\xA0"+c(e.i18nSaleTypeGroup),1),l(h,{model:e.cSaleTypeGroup,"label-width":"120px",rules:e.rules,ref:"createSaleTypeGroupRef"},{default:s(()=>[l(n,{label:e.i18nBlah,prop:"title"},{default:s(()=>[l(a,{modelValue:e.cSaleTypeGroup.title,"onUpdate:modelValue":t[0]||(t[0]=p=>e.cSaleTypeGroup.title=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nIsActive},{default:s(()=>[l(o,{modelValue:e.cSaleTypeGroup.is_active,"onUpdate:modelValue":t[1]||(t[1]=p=>e.cSaleTypeGroup.is_active=p),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nDisplayOrder,prop:"display_order"},{default:s(()=>[l(a,{modelValue:e.cSaleTypeGroup.display_order,"onUpdate:modelValue":t[2]||(t[2]=p=>e.cSaleTypeGroup.display_order=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"danger",onClick:e.close},{default:s(()=>[y(c(e.i18nClose),1)]),_:1},8,["onClick"]),l(m,{type:"success",onClick:t[3]||(t[3]=p=>e.createSaleTypeGroup("createSaleTypeGroupRef"))},{default:s(()=>[y(c(e.i18nCreate)+"\xA0"+c(e.i18nSaleTypeGroup),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])],64)}const Ue=w(Pe,[["render",ke]]),De={name:"TaxTypes",components:{TableSaleTypeGroups:ve,EditSaleTypeGroup:Ge,CreateSaleTypeGroup:Ue},data(){return{reloadTrigger:1,selectedSaleTypeGroup:null,displayCreateSaleTypeGroup:!1}},computed:{i18nCreate(){return this.$i18n.t("message.create")},i18nSaleTypeGroup(){return this.$i18n.t("message.saleTypeGroup")},iGroup(){return this.$i18n.t("message.group")},token(){return G().token}},methods:{closeCreateSaleTypeGroup(){this.displayCreateSaleTypeGroup=!1},createSaleTypeGroup(e){e.is_active=parseInt(e.is_active),e.display_order=parseInt(e.display_order),e.title=e.title,S.saleTypeGroups.createSaleTypeGroup(this.token,e).then(t=>{t.data.create==!0?(U().setSaleTypeGroups(t.data.all_sale_type_groups),this.reloadTrigger+=1,g({type:"success",message:"Group was created."}),this.displayCreateSaleTypeGroup=!1):g({type:"error",message:"Error! Not created."})})},closeEditSaleTypeGroup(){this.selectedSaleTypeGroup=null},deleteSaleTypeGroup(e){console.log(e),S.taxTypes.deleteTaxType(this.token,e).then(t=>{t.data.delete==!0?(P().setTaxTypes(t.data.all_tax_types),this.reloadTrigger+=1,g({type:"success",message:"Tax type was deleted."})):g({type:"danger",message:"Error!  Not deleted."})})},showCreateSaleTypeGroup(){this.displayCreateSaleTypeGroup=!0,this.selectedSaleTypeGroup=null},saleTypeGroupDelete(e){console.log("o",e),S.saleTypeGroups.deleteSaleTypeGroup(this.token,e.id).then(t=>{t.data.delete==!0?(this.selectedSaleTypeGroup=null,U().setSaleTypeGroups(t.data.all_sale_type_groups),this.reloadTrigger+=1,g({type:"success",message:"Sale type group was updated."})):g({type:"error",message:"Error!  Not deleted."})})},saleTypeGroupSelected(e){this.selectedSaleTypeGroup=e,this.displayCreateSaleTypeGroup=!1},saleTypeGroupUpdate(e){e.is_active=parseInt(e.is_active),S.saleTypeGroups.updateSaleTypeGroup(this.token,e).then(t=>{t.data.update==!0?(U().setSaleTypeGroups(t.data.all_sale_type_groups),this.reloadTrigger+=1,g({type:"success",message:"Tax type was updated."})):g({type:"error",message:"Error!  Not updated."})})}}},Ie=C("p",{style:{color:"red"}},"This currently lets the user delete and update willy nilly. Need to make sure it doesn't compromise data.",-1);function Ne(e,t){const a=r("el-col"),n=r("el-row"),i=r("el-button"),o=r("TableSaleTypeGroups"),m=r("EditSaleTypeGroup"),h=r("CreateSaleTypeGroup");return u(),f($,null,[l(n,null,{default:s(()=>[l(a,{xs:24},{default:s(()=>[Ie]),_:1})]),_:1}),l(n,null,{default:s(()=>[l(a,{xs:24},{default:s(()=>[l(i,{type:"primary",onClick:t[0]||(t[0]=p=>(e.displayCreateSaleTypeGroup=!0,e.selectedSaleTypeGroup=null))},{default:s(()=>[y(c(e.i18nCreate)+" "+c(e.iGroup),1)]),_:1})]),_:1})]),_:1}),l(n,null,{default:s(()=>[l(a,{xs:24,sm:12},{default:s(()=>[l(o,{reloadTrigger:e.reloadTrigger,"onTableSaleTypeGroups:saleTypeGroupSelected":e.saleTypeGroupSelected},null,8,["reloadTrigger","onTableSaleTypeGroups:saleTypeGroupSelected"])]),_:1}),l(a,{xs:24,sm:12},{default:s(()=>[e.selectedSaleTypeGroup?(u(),T(m,{key:0,selectedSaleTypeGroup:e.selectedSaleTypeGroup,onEditSaleTypeGroupClose:e.closeEditSaleTypeGroup,onEditSaleTypeGroupUpdate:e.saleTypeGroupUpdate,"onEditSaleTypeGroup:delete":e.saleTypeGroupDelete},null,8,["selectedSaleTypeGroup","onEditSaleTypeGroupClose","onEditSaleTypeGroupUpdate","onEditSaleTypeGroup:delete"])):b("",!0),e.displayCreateSaleTypeGroup?(u(),T(h,{key:1,"onCreateSaleTypeGroup:create":e.createSaleTypeGroup,"onCreateSaleTypeGroup:close":e.closeCreateSaleTypeGroup},null,8,["onCreateSaleTypeGroup:create","onCreateSaleTypeGroup:close"])):b("",!0)]),_:1})]),_:1})],64)}const Re=w(De,[["render",Ne]]),Fe={name:"TableSpaceTypes",props:["reloadTrigger"],emits:["tableSpaceTypes:spaceTypeSelected"],data(){return{cellStyle:{padding:"5px"},selctedSpaceType:{},spaceTypes:[],tstriped:!0}},computed:{token(){return G().token}},methods:{getSpaceTypes(){S.spaceTypes.getSpaceTypes(this.token).then(e=>{this.spaceTypes=e.data.space_types})},rowSelected(e){console.log("selected"),this.$emit("tableSpaceTypes:spaceTypeSelected",{...e})}},mounted(){this.getSpaceTypes()},watch:{reloadTrigger(e,t){this.getSpaceTypes()}}};function Oe(e,t){const a=r("el-table-column"),n=r("el-table");return u(),T(n,{data:e.spaceTypes,stripe:"","highlight-current-row":"",height:"500",size:"small",style:{width:"100%"},"cell-class-name":"t-table-cell","table-layout":"auto",onRowClick:e.rowSelected},{default:s(()=>[l(a,{prop:"id",label:"Id"}),l(a,{prop:"title",label:"Title"}),l(a,{prop:"is_active",label:"Is Active"}),l(a,{prop:"display_order",label:"Display Order"})]),_:1},8,["data","onRowClick"])}const qe=w(Fe,[["render",Oe]]),Le={name:"EditSpaceType",props:["selectedSpaceType"],emits:["editSpaceType-close","editSpaceType-update","editSpaceType:delete"],data(){return{eSpaceType:null,rules:{title:[{required:!0,message:"Group title is required",trigger:"change"},{min:4,max:24,message:"4 to 24",trigger:"change"}],display_order:[{required:!0,message:"Display order title is required",trigger:"change"},{validator:this.isInteger,message:"Display order must be a number",trigger:"change"},{validator:this.isGreaterThan1,message:"Display order must be at least 1",trigger:"change"}]}}},computed:{i18nClose(){return this.$i18n.t("message.close")},i18nDisplayOrder(){return this.$i18n.t("message.displayOrder")},i18nEdit(){return this.$i18n.t("message.edit")},i18nFalse(){return this.$i18n.t("message.false")},i18nIsCurrent(){return this.$i18n.t("message.isCurrent")},i18nTaxRate(){return this.$i18n.t("message.taxRate")},i18nFoo(){return this.$i18n.t("message.stTitle")},i18nSpaceType(){return this.$i18n.t("message.spaceType")},i18nTrue(){return this.$i18n.t("message.true")},i18nUpdate(){return this.$i18n.t("message.update")}},methods:{close(){this.$emit("editSpaceType-close")},deleteSpaceType(){console.log("del"),this.$emit("editSpaceType:delete",{...this.eSpaceType})},updateSpaceType(e){this.$refs[e].validate(t=>{t?this.$emit("editSpaceType-update",{...this.eSpaceType}):console.log("not valid")})},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()}},created(){},mounted(){this.eSpaceType=this.selectedSpaceType,this.eSpaceType.is_active=this.selectedSpaceType.is_active.toString()},watch:{selectedSpaceType(e){this.eSpaceType=e,this.eSpaceType.is_active=e.is_active.toString()}}},ze={key:0},Be=C("hr",null,null,-1);function Me(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-form"),p=r("el-popconfirm");return e.eSpaceType?(u(),f("div",ze,[C("div",null,c(e.i18nEdit)+"\xA0"+c(e.i18nSpaceType),1),l(h,{model:e.eSpaceType,"label-width":"120px",rules:e.rules,ref:"saleGroupRef"},{default:s(()=>[l(n,{label:e.i18nFoo,prop:"title"},{default:s(()=>[l(a,{modelValue:e.eSpaceType.title,"onUpdate:modelValue":t[0]||(t[0]=d=>e.eSpaceType.title=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nIsCurrent},{default:s(()=>[l(o,{modelValue:e.eSpaceType.is_active,"onUpdate:modelValue":t[1]||(t[1]=d=>e.eSpaceType.is_active=d),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nDisplayOrder,prop:"display_order"},{default:s(()=>[l(a,{modelValue:e.eSpaceType.display_order,"onUpdate:modelValue":t[2]||(t[2]=d=>e.eSpaceType.display_order=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"primary",onClick:e.close},{default:s(()=>[y(c(e.i18nClose),1)]),_:1},8,["onClick"]),l(m,{type:"success",onClick:t[3]||(t[3]=d=>e.updateSpaceType("saleGroupRef"))},{default:s(()=>[y(c(e.i18nUpdate),1)]),_:1})]),_:1})]),_:1},8,["model","rules"]),Be,l(p,{title:"Are you sure to delete this?",onConfirm:e.deleteSpaceType},{reference:s(()=>[l(m,{type:"danger"},{default:s(()=>[y("Delete")]),_:1})]),_:1},8,["onConfirm"])])):b("",!0)}const Ye=w(Le,[["render",Me]]),He={name:"CreateSpaceType",emits:["createSpaceType:create","createSpaceType:close"],data(){return{cSpaceType:{title:"",is_active:"1",display_order:"0"},rules:{title:[{required:!0,message:"Title is required",trigger:"change"},{min:4,max:24,message:"4 to 24 characters",trigger:"change"}],display_order:[{required:!0,message:"Display order title is required",trigger:"change"},{validator:this.isInteger,message:"Display order must be a number",trigger:"change"},{validator:this.isGreaterThan1,message:"Display order must be at least 1",trigger:"change"}]}}},computed:{i18nClose(){return this.$i18n.t("message.close")},i18nCreate(){return this.$i18n.t("message.create")},i18nDisplayOrder(){return this.$i18n.t("message.displayOrder")},i18nFalse(){return this.$i18n.t("message.false")},i18nIsActive(){return this.$i18n.t("message.isActive")},i18nTaxRate(){return this.$i18n.t("message.taxRate")},i18nBlah(){return this.$i18n.t("message.stTitle")},i18nSpaceType(){return this.$i18n.t("message.spaceType")},i18nTrue(){return this.$i18n.t("message.true")}},methods:{createSpaceType(e){this.$refs[e].validate(t=>{t?this.$emit("createSpaceType:create",{...this.cSpaceType}):console.log("not valid")})},close(){this.cSpaceType={title:"",is_active:"1",display_order:"0"},this.$emit("createSpaceType:close")},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()}}};function Ke(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-form");return u(),f($,null,[C("div",null,c(e.i18nCreate)+"\xA0"+c(e.i18nSpaceType),1),l(h,{model:e.cSpaceType,"label-width":"120px",rules:e.rules,ref:"createSpaceTypeRef"},{default:s(()=>[l(n,{label:e.i18nBlah,prop:"title"},{default:s(()=>[l(a,{modelValue:e.cSpaceType.title,"onUpdate:modelValue":t[0]||(t[0]=p=>e.cSpaceType.title=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nIsActive},{default:s(()=>[l(o,{modelValue:e.cSpaceType.is_active,"onUpdate:modelValue":t[1]||(t[1]=p=>e.cSpaceType.is_active=p),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nDisplayOrder,prop:"display_order"},{default:s(()=>[l(a,{modelValue:e.cSpaceType.display_order,"onUpdate:modelValue":t[2]||(t[2]=p=>e.cSpaceType.display_order=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"danger",onClick:e.close},{default:s(()=>[y(c(e.i18nClose),1)]),_:1},8,["onClick"]),l(m,{type:"success",onClick:t[3]||(t[3]=p=>e.createSpaceType("createSpaceTypeRef"))},{default:s(()=>[y(c(e.i18nCreate)+"\xA0"+c(e.i18nSpaceType),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])],64)}const Ze=w(He,[["render",Ke]]),Je={name:"TaxTypes",components:{TableSpaceTypes:qe,EditSpaceType:Ye,CreateSpaceType:Ze},data(){return{reloadTrigger:1,selectedSpaceType:null,displayCreateSpaceType:!1}},computed:{i18nCreate(){return this.$i18n.t("message.create")},i18nSpaceType(){return this.$i18n.t("message.spaceType")},iGroup(){return this.$i18n.t("message.spaceType")},token(){return G().token}},methods:{closeCreateSpaceType(){this.displayCreateSpaceType=!1},createSpaceType(e){e.is_active=parseInt(e.is_active),e.display_order=parseInt(e.display_order),e.title=e.title,S.spaceTypes.createSpaceType(this.token,e).then(t=>{t.data.create==!0?(N().setSpaceTypes(t.data.all_sale_type_groups),this.reloadTrigger+=1,g({type:"success",message:"Group was created."}),this.displayCreateSpaceType=!1):g({type:"error",message:"Error! Not created."})})},closeEditSpaceType(){this.selectedSpaceType=null},deleteSpaceType(e){console.log(e),S.taxTypes.deleteTaxType(this.token,e).then(t=>{t.data.delete==!0?(P().setTaxTypes(t.data.all_tax_types),this.reloadTrigger+=1,g({type:"success",message:"Tax type was deleted."})):g({type:"danger",message:"Error!  Not deleted."})})},showCreateSpaceType(){this.displayCreateSpaceType=!0,this.selectedSpaceType=null},spaceTypeDelete(e){console.log("o",e),S.spaceTypes.deleteSpaceType(this.token,e.id).then(t=>{t.data.delete==!0?(this.selectedSpaceType=null,N().setSpaceTypes(t.data.all_sale_type_groups),this.reloadTrigger+=1,g({type:"success",message:"Sale type group was updated."})):g({type:"error",message:"Error!  Not deleted."})})},spaceTypeSelected(e){this.selectedSpaceType=e,this.displayCreateSpaceType=!1},spaceTypeUpdate(e){e.is_active=parseInt(e.is_active),S.spaceTypes.updateSpaceType(this.token,e).then(t=>{t.data.update==!0?(N().setSpaceTypes(t.data.space_types),this.reloadTrigger+=1,g({type:"success",message:"Space type was updated."})):g({type:"error",message:"Error!  Not updated."})})}}},Qe=C("p",{style:{color:"red"}},"This currently lets the user delete and update willy nilly. Need to make sure it doesn't compromise data.",-1);function We(e,t){const a=r("el-col"),n=r("el-row"),i=r("el-button"),o=r("TableSpaceTypes"),m=r("EditSpaceType"),h=r("CreateSpaceType");return u(),f($,null,[l(n,null,{default:s(()=>[l(a,{xs:24},{default:s(()=>[Qe]),_:1})]),_:1}),l(n,null,{default:s(()=>[l(a,{xs:24},{default:s(()=>[l(i,{type:"primary",onClick:t[0]||(t[0]=p=>(e.displayCreateSpaceType=!0,e.selectedSpaceType=null))},{default:s(()=>[y(c(e.i18nCreate)+" "+c(e.i18nSpaceType),1)]),_:1})]),_:1})]),_:1}),l(n,null,{default:s(()=>[l(a,{xs:24,sm:12},{default:s(()=>[l(o,{reloadTrigger:e.reloadTrigger,"onTableSpaceTypes:spaceTypeSelected":e.spaceTypeSelected},null,8,["reloadTrigger","onTableSpaceTypes:spaceTypeSelected"])]),_:1}),l(a,{xs:24,sm:12},{default:s(()=>[e.selectedSpaceType?(u(),T(m,{key:0,selectedSpaceType:e.selectedSpaceType,onEditSpaceTypeClose:e.closeEditSpaceType,onEditSpaceTypeUpdate:e.spaceTypeUpdate,"onEditSpaceType:delete":e.spaceTypeDelete},null,8,["selectedSpaceType","onEditSpaceTypeClose","onEditSpaceTypeUpdate","onEditSpaceType:delete"])):b("",!0),e.displayCreateSpaceType?(u(),T(h,{key:1,"onCreateSpaceType:create":e.createSpaceType,"onCreateSpaceType:close":e.closeCreateSpaceType},null,8,["onCreateSpaceType:create","onCreateSpaceType:close"])):b("",!0)]),_:1})]),_:1})],64)}const Xe=w(Je,[["render",We]]),xe={name:"SaleTypesTable",props:["saleTypes"],emits:["saleTypesTable:saleTypeSelected"],data(){return{}},computed:{saleTypesMod(){let e=[];return V.each(this.saleTypes,t=>{let a=V.find(this.saleTypeGroups,n=>n.id==t.sale_type_group);t.stgLabel=a.title,e.push(t)}),e},saleTypeGroups(){return U().saleTypeGroups}},methods:{rowSelected(e){let t={...e};t.tax_types=[...e.tax_types],this.$emit("saleTypesTable:saleTypeSelected",t)}}};function je(e,t){const a=r("el-table-column"),n=r("el-table");return u(),T(n,{data:e.saleTypesMod,stripe:"","highlight-current-row":"",height:"170",size:"small",style:{width:"100%"},"cell-class-name":"t-table-cell","table-layout":"auto",onRowClick:e.rowSelected},{default:s(()=>[l(a,{prop:"id",label:"Id"}),l(a,{prop:"title",label:"Title"}),l(a,{prop:"tax_types",label:"Tax Types"}),l(a,{prop:"stgLabel",label:"Sale Type Group"}),l(a,{prop:"is_fixed_price",label:"Is Fixed Price"}),l(a,{prop:"fixed_price",label:"Fixed Price"}),l(a,{prop:"is_active",label:"Is Active"}),l(a,{prop:"display_order",label:"Display Order"})]),_:1},8,["data","onRowClick"])}const et=w(xe,[["render",je]]),tt={name:"EditSaleType",props:["selectedSaleType"],emits:["editSaleType:close","editSaleType:update","editSaleType:delete"],data(){return{eSaleType:null,rules:{fixed_price:[{required:!0,message:"Price is required",trigger:"change"},{validator:this.isFloat,message:"Must be a float",trigger:"change"},{validator:this.isTwoDecimal,message:"Must have two decimal",trigger:"change"}],title:[{required:!0,message:"Group title is required",trigger:"change"},{min:4,max:24,message:"4 to 24",trigger:"change"}],display_order:[{required:!0,message:"Display order title is required",trigger:"change"},{validator:this.isInteger,message:"Display order must be a number",trigger:"change"},{validator:this.isGreaterThan1,message:"Display order must be at least 1",trigger:"change"}]}}},computed:{isFixedPriceRef(){return this.eSaleType?this.eSaleType.is_fixed_price:null},saleTypeGroups(){return U().saleTypeGroups},taxTypes(){let e=P().taxTypes;return V.filter(e,a=>a.is_current==1)},taxTypeOptions(){let e=[];return V.each(this.taxTypes,t=>{let a={value:t.id,label:t.tax_title};e.push(a)}),e},fixedPriceLabel(){return this.$i18n.t("message.fixedPrice")},i18nFoob(){return this.$i18n.t("message.stTitle")},i18nDisplayOrder(){return this.$i18n.t("message.displayOrder")},isActiveLabel(){return this.$i18n.t("message.isActive")},isFixedPriceLabel(){return this.$i18n.t("message.isFixedPrice")},i18nFalse(){return this.$i18n.t("message.false")},i18nTrue(){return this.$i18n.t("message.true")},taxTypeLabel(){return this.$i18n.t("message.taxType")},saleTypeGroupLabel(){return this.$i18n.t("message.saleTypeGroup")},updateLabel(){return this.$i18n.t("message.update")},closeLabel(){return this.$i18n.t("message.close")},confirmDeleteLabel(){return this.$i18n.t("message.confirmDelete")},deleteLabel(){return this.$i18n.t("message.delete")}},methods:{close(){this.$emit("editSaleType:close")},deleteSaleType(){let e={...this.eSaleType};e.tax_types=[...this.eSaleType.tax_types],e.fixed_price=parseFloat(e.fixed_price).toFixed(2),this.$emit("editSaleType:delete",e)},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()},isTwoDecimal(e,t,a){let n=t.toString().split(".");console.log("split",n),!n[1]||n[1].length!==2?a(new Error("must be two decimals")):a()},updateSaleType(e){this.$refs[e].validate(t=>{if(t){let a={...this.eSaleType};a.tax_types=[...this.eSaleType.tax_types],a.fixed_price=parseFloat(a.fixed_price).toFixed(2),this.$emit("editSaleType:update",a)}else console.log("not valid")})}},created(){this.eSaleType=this.selectedSaleType,this.eSaleType.is_active=this.selectedSaleType.is_active.toString(),this.eSaleType.is_fixed_price=this.selectedSaleType.is_fixed_price.toString()},watch:{isFixedPriceRef(e){console.log("eST change",e),e=="0"&&this.eSaleType.fixed_price&&(this.eSaleType.fixed_price="0.00")},selectedSaleType(e){console.log("sst change"),this.eSaleType=e,this.eSaleType.is_active=e.is_active.toString(),this.eSaleType.is_fixed_price=this.selectedSaleType.is_fixed_price.toString()}}},lt=C("hr",null,null,-1);function at(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-popconfirm"),p=r("el-form");return u(),T(p,{model:e.eSaleType,"label-width":"180px",rules:e.rules,ref:"saleTypeRef"},{default:s(()=>[l(n,{label:e.i18nFoob,prop:"title"},{default:s(()=>[l(a,{modelValue:e.eSaleType.title,"onUpdate:modelValue":t[0]||(t[0]=d=>e.eSaleType.title=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.taxTypeLabel,prop:"tax_types"},{default:s(()=>[l(o,{modelValue:e.eSaleType.tax_types,"onUpdate:modelValue":t[1]||(t[1]=d=>e.eSaleType.tax_types=d),multiple:"","default-first-option":"","reserve-keyword":!1,placeholder:"Choose tags for your article"},{default:s(()=>[(u(!0),f($,null,E(e.taxTypeOptions,d=>(u(),T(i,{label:d.label,value:d.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.saleTypeGroupLabel,prop:"sale_type_group"},{default:s(()=>[l(o,{modelValue:e.eSaleType.sale_type_group,"onUpdate:modelValue":t[2]||(t[2]=d=>e.eSaleType.sale_type_group=d)},{default:s(()=>[(u(!0),f($,null,E(e.saleTypeGroups,d=>(u(),T(i,{value:d.id,label:d.title},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.isActiveLabel},{default:s(()=>[l(o,{modelValue:e.eSaleType.is_active,"onUpdate:modelValue":t[3]||(t[3]=d=>e.eSaleType.is_active=d),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.isFixedPriceLabel},{default:s(()=>[l(o,{modelValue:e.eSaleType.is_fixed_price,"onUpdate:modelValue":t[4]||(t[4]=d=>e.eSaleType.is_fixed_price=d),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),e.eSaleType.is_fixed_price=="1"?(u(),T(n,{key:0,label:e.fixedPriceLabel,prop:"fixed_price"},{default:s(()=>[l(a,{modelValue:e.eSaleType.fixed_price,"onUpdate:modelValue":t[5]||(t[5]=d=>e.eSaleType.fixed_price=d)},null,8,["modelValue"])]),_:1},8,["label"])):b("",!0),l(n,{label:e.i18nDisplayOrder,prop:"display_order"},{default:s(()=>[l(a,{modelValue:e.eSaleType.display_order,"onUpdate:modelValue":t[6]||(t[6]=d=>e.eSaleType.display_order=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"success",onClick:t[7]||(t[7]=d=>e.updateSaleType("saleTypeRef"))},{default:s(()=>[y(c(e.updateLabel),1)]),_:1}),l(m,{type:"danger",onClick:e.close},{default:s(()=>[y(c(e.closeLabel),1)]),_:1},8,["onClick"])]),_:1}),lt,l(h,{title:e.confirmDeleteLabel,onConfirm:e.deleteSaleType},{reference:s(()=>[l(m,{type:"danger"},{default:s(()=>[y(c(e.deleteLabel),1)]),_:1})]),_:1},8,["title","onConfirm"])]),_:1},8,["model","rules"])}const st=w(tt,[["render",at]]),rt={name:"CreateSaleType",props:["reloadTrigger"],emits:["createSaleType:close","createSaleType:create"],data(){return{eSaleType:{title:"",fixed_price:"0.00",is_active:"1",is_fixed_price:null,tax_types:[]},rules:{fixed_price:[{required:!0,message:"Price is required",trigger:"change"},{validator:this.isFloat,message:"Must be a float",trigger:"change"},{validator:this.isTwoDecimal,message:"Must have two decimal",trigger:"change"}],title:[{required:!0,message:"Title is required",trigger:"change"},{min:4,max:24,message:"4 to 24",trigger:"change"}],display_order:[{required:!0,message:"Display order is required",trigger:"change"},{validator:this.isInteger,message:"Display order must be a number",trigger:"change"},{validator:this.isGreaterThan1,message:"Display order must be at least 1",trigger:"change"}],sale_type_group:[{required:!0,message:"Group is required",trigger:"change"},{validator:this.isNotEmptyArray,message:"Must choose group",trigger:"change"}],tax_types:[{required:!0,message:"Tax type is required",trigger:"change"},{validator:this.isNotEmptyArray,message:"Must choose tax type",trigger:"change"}]}}},computed:{locale(){return Y().selectedLocale},saleTypeGroups(){return U().saleTypeGroups},taxTypes(){let e=P().taxTypes;return V.filter(e,a=>a.is_current==1)},taxTypeOptions(){let e=[];return V.each(this.taxTypes,t=>{let a={value:t.id,label:t.tax_title};e.push(a)}),e},fixedPriceLabel(){return this.$i18n.t("message.fixedPrice")},i18nFoob(){return this.$i18n.t("message.stTitle")},i18nDisplayOrder(){return this.$i18n.t("message.displayOrder")},isActiveLabel(){return this.$i18n.t("message.isActive")},isFixedPriceLabel(){return this.$i18n.t("message.isFixedPrice")},i18nFalse(){return this.$i18n.t("message.false")},i18nTrue(){return this.$i18n.t("message.true")},taxTypeLabel(){return this.$i18n.t("message.taxType")},saleTypeGroupLabel(){return this.$i18n.t("message.saleTypeGroup")},updateLabel(){return this.$i18n.t("message.update")},closeLabel(){return this.$i18n.t("message.close")},confirmDeleteLabel(){return this.$i18n.t("message.confirmDelete")},deleteLabel(){return this.$i18n.t("message.delete")},createL(){return this.$i18n.t("message.create")},createLabel(){return this.$i18n.t("message.create")+" "+this.$i18n.t("message.saleType")},placeholder(){return this.$t("message.select")},taxTypePlaceholder(){return this.$t("message.select")+" "+this.$t("message.taxType")}},methods:{close(){this.$emit("createSaleType:close")},createSaleType(e){this.$refs[e].validate(t=>{if(t){let a={...this.eSaleType};a.tax_types=[...this.eSaleType.tax_types],console.log("estClean.fixed_price",a.fixed_price),a.fixed_price=parseFloat(a.fixed_price).toFixed(2),this.$emit("createSaleType:create",a)}else console.log("not valid")})},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()},isNotEmptyArray(e,t,a){t.length<1?a(new Error("must ")):a()},isTwoDecimal(e,t,a){if(!t)a(new Error("must be two decimals"));else{let n=t.toString().split(".");!n[1]||n[1].length!==2?a(new Error("must be two decimals")):a()}}},watch:{reloadTrigger(){console.log("reloadTrigger on createSaleType.vue"),this.eSaleType={title:"",fixed_price:"0.00",is_active:"1",is_fixed_price:"1",tax_types:[]}}}};function nt(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-form"),p=r("el-config-provider");return u(),f($,null,[C("div",null,c(e.createLabel),1),l(p,{locale:e.locale},{default:s(()=>[l(h,{model:e.eSaleType,"label-width":"180px",rules:e.rules,ref:"saleTypeRef",size:"small"},{default:s(()=>[l(n,{label:e.i18nFoob,prop:"title"},{default:s(()=>[l(a,{modelValue:e.eSaleType.title,"onUpdate:modelValue":t[0]||(t[0]=d=>e.eSaleType.title=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.taxTypeLabel,prop:"tax_types"},{default:s(()=>[l(o,{modelValue:e.eSaleType.tax_types,"onUpdate:modelValue":t[1]||(t[1]=d=>e.eSaleType.tax_types=d),multiple:"","default-first-option":"","reserve-keyword":!1,placeholder:e.taxTypePlaceholder},{default:s(()=>[(u(!0),f($,null,E(e.taxTypeOptions,d=>(u(),T(i,{label:d.label,value:d.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{label:e.saleTypeGroupLabel,prop:"sale_type_group"},{default:s(()=>[l(o,{modelValue:e.eSaleType.sale_type_group,"onUpdate:modelValue":t[2]||(t[2]=d=>e.eSaleType.sale_type_group=d)},{default:s(()=>[(u(!0),f($,null,E(e.saleTypeGroups,d=>(u(),T(i,{value:d.id,label:d.title},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.isActiveLabel},{default:s(()=>[l(o,{modelValue:e.eSaleType.is_active,"onUpdate:modelValue":t[3]||(t[3]=d=>e.eSaleType.is_active=d),placeholder:e.placeholder},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{label:e.isFixedPriceLabel,prop:"is_fixed_price"},{default:s(()=>[l(o,{modelValue:e.eSaleType.is_fixed_price,"onUpdate:modelValue":t[4]||(t[4]=d=>e.eSaleType.is_fixed_price=d),placeholder:e.placeholder},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e.eSaleType.is_fixed_price=="1"?(u(),T(n,{key:0,label:e.fixedPriceLabel,prop:"fixed_price"},{default:s(()=>[l(a,{modelValue:e.eSaleType.fixed_price,"onUpdate:modelValue":t[5]||(t[5]=d=>e.eSaleType.fixed_price=d)},null,8,["modelValue"])]),_:1},8,["label"])):b("",!0),l(n,{label:e.i18nDisplayOrder,prop:"display_order"},{default:s(()=>[l(a,{modelValue:e.eSaleType.display_order,"onUpdate:modelValue":t[6]||(t[6]=d=>e.eSaleType.display_order=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"success",onClick:t[7]||(t[7]=d=>e.createSaleType("saleTypeRef"))},{default:s(()=>[y(c(e.createL),1)]),_:1}),l(m,{type:"danger",onClick:e.close},{default:s(()=>[y(c(e.closeLabel),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["locale"])],64)}const it=w(rt,[["render",nt]]),ot={name:"SaleTypes",components:{SaleTypesTable:et,EditSaleType:st,CreateSaleType:it},data(){return{saleTypes:[],selectedSaleType:null,displayCreateSaleType:!1,reloadTrigger:1}},computed:{token(){return G().token},createSaleTypeLabel(){return this.$i18n.t("message.create")+" "+this.$i18n.t("message.saleType")}},methods:{closeCreateSaleType(){this.displayCreateSaleType=!1},closeEditor(){this.selectedSaleType=null},createSaleType(e){console.table(e),e.display_order=parseInt(e.display_order),e.is_active=parseInt(e.is_active),e.is_fixed_price=parseInt(e.is_fixed_price),e.fixed_price=parseFloat(e.fixed_price),e.title=e.title.trim(),S.saleTypes.createSaleType(this.token,e).then(t=>{t.data&&t.data.create==!0?(F().setSaleTypes(t.data.all_sale_types),this.saleTypes=t.data.all_sale_types,this.reloadTrigger+=1,g({type:"success",message:"Sale Type created"})):(this.reloadTrigger+=1,g({type:"warning",message:"ERROR: not created"}))})},deleteSaleType(e){console.log("delete"),console.table(e)},getSaleTypes(){S.saleTypes.getSaleTypes(this.token).then(e=>{this.saleTypes=e.data.all_sale_types})},saleTypeSelected(e){this.displayCreateSaleType=!1,this.selectedSaleType=e},showCreateSaleType(){this.selectedSaleType=null,this.displayCreateSaleType=!0},updateSaleType(e){e.is_fixed_price=parseInt(e.is_fixed_price),e.is_active=parseInt(e.is_active),e.display_order=parseInt(e.display_order),S.saleTypes.updateSaleType(this.token,e).then(t=>{t.data&&t.data.update==!0?(F().setSaleTypes(t.data.all_sale_types),this.saleTypes=t.data.all_sale_types,g({type:"success",message:"Sale Type updated"})):g({type:"warning",message:"ERROR: not updated"})})}},mounted(){this.getSaleTypes()}},pt=C("div",null,"SaleTypes",-1);function dt(e,t){const a=r("el-button"),n=r("SaleTypesTable"),i=r("CreateSaleType"),o=r("EditSaleType");return u(),f($,null,[pt,l(a,{onClick:e.showCreateSaleType,type:"primary"},{default:s(()=>[y(c(e.createSaleTypeLabel),1)]),_:1},8,["onClick"]),l(n,{saleTypes:e.saleTypes,"onSaleTypesTable:saleTypeSelected":e.saleTypeSelected},null,8,["saleTypes","onSaleTypesTable:saleTypeSelected"]),e.displayCreateSaleType?(u(),T(i,{key:0,reloadTrigger:e.reloadTrigger,"onCreateSaleType:close":e.closeCreateSaleType,"onCreateSaleType:create":e.createSaleType},null,8,["reloadTrigger","onCreateSaleType:close","onCreateSaleType:create"])):b("",!0),e.selectedSaleType?(u(),T(o,{key:1,selectedSaleType:e.selectedSaleType,"onEditSaleType:close":e.closeEditor,"onEditSaleType:update":e.updateSaleType,"onEditSaleType:delete":e.deleteSaleType},null,8,["selectedSaleType","onEditSaleType:close","onEditSaleType:update","onEditSaleType:delete"])):b("",!0)],64)}const ut=w(ot,[["render",dt]]),ct={name:"TableAccounts",props:["reloadTrigger"],emits:["tableAccounts:accountSelected"],data(){return{cellStyle:{padding:"5px"},selctedAccount:{},accounts:[],tstriped:!0}},computed:{token(){return G().token}},methods:{getAccounts(){S.account.getAllAccounts(this.token).then(e=>{this.accounts=e.data.all_accounts})},rowSelected(e){console.log("selected"),this.$emit("tableAccounts:accountSelected",{...e})}},mounted(){this.getAccounts()},watch:{reloadTrigger(e,t){this.getAccounts()}}};function mt(e,t){const a=r("el-table-column"),n=r("el-table");return u(),T(n,{data:e.accounts,stripe:"","highlight-current-row":"",height:"200",size:"small",style:{width:"100%"},"cell-class-name":"t-table-cell","table-layout":"auto",onRowClick:e.rowSelected},{default:s(()=>[l(a,{prop:"id",label:"Id"}),l(a,{prop:"username",label:"Username"}),l(a,{prop:"permission",label:"Permission"}),l(a,{prop:"email",label:"Email"}),l(a,{prop:"is_active",label:"Is Active"})]),_:1},8,["data","onRowClick"])}const yt=w(ct,[["render",mt]]),Tt={name:"EditAccount",props:["selectedAccount"],emits:["edit-account-update","edit-account-close","edit-account-password-update"],data(){return{eAccount:null,rules:{username:[{required:!0,message:"username is required",trigger:"change"},{min:4,max:24,message:"4 to 24 characters",trigger:"change"}],email:[{required:!0,message:"Email is required",trigger:"change"},{validator:this.isEmail,message:"Invalid email",trigger:"change"}],password1:[{required:!0,message:"password is required",trigger:"change"},{min:6,max:16,message:"6 to 16 characters",trigger:"change"},{validator:this.isAlphanumDashStarUnderscore,message:"alphanum, dash, star, underscore",trigger:"change"}],password2:[{required:!0,message:"password is required",trigger:"change"},{min:6,max:16,message:"6 to 16 characters",trigger:"change"},{validator:this.isAlphanumDashStarUnderscore,message:"alphanum, dash, star, underscore",trigger:"change"},{validator:this.isSameAsPassword1,message:"passwords must match",trigger:"change"}]},pArr:[1,2,3,4,5,6,7,8,9,19],pwdEdit:{password1:"",password2:""},showEditAccount:!0,showEditPassword:!1}},computed:{i18nClose(){return this.$i18n.t("message.close")},i18nName(){return this.$i18n.t("message.name")},i18nEdit(){return this.$i18n.t("message.edit")},i18nFalse(){return this.$i18n.t("message.false")},i18nIsActive(){return this.$i18n.t("message.isActive")},i18nAccount(){return this.$i18n.t("message.account")},i18nTrue(){return this.$i18n.t("message.true")},i18nUpdate(){return this.$i18n.t("message.update")},iPermission(){return this.$i18n.t("message.permission")},iEmail(){return this.$i18n.t("message.email")},iPassword(){return this.$i18n.t("message.password")},iDelete(){return this.$i18n.t("message.delete")},editActLabel(){return this.$i18n.t("message.edit")+" "+this.$i18n.t("message.account")},editPwdLabel(){return this.$i18n.t("message.update")+" "+this.$i18n.t("message.password")}},methods:{close(){this.$emit("edit-account-close")},deleteAccount(){console.log("del"),this.$emit("editAccount:delete",{...this.eAccount})},toggleEditors(){this.showEditAccount=!this.showEditAccount,this.showEditPassword=!this.showEditPassword,this.pwdEdit.password1="",this.pwdEdit.password2=""},updateAccount(e){this.$refs[e].validate(t=>{if(t){let a={...this.eAccount};a.roles=[...this.eAccount.roles],this.$emit("edit-account-update",a)}else console.log("not valid")})},updatePassword(e){this.$refs[e].validate(t=>{t?this.$emit("edit-account-password-update",{...this.eAccount},this.pwdEdit.password1):console.log("not valid")})},isAlphanumDashStarUnderscore(e,t,a){/^[A-Za-z0-9_*-]+$/.test(t)==!1?a(new Error("must be numbers")):a()},isFloat(e,t,a){isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()},isSameAsPassword1(e,t,a){t!==this.pwdEdit.password1?a(new Error("must match")):a()}},created(){},mounted(){this.eAccount=this.selectedAccount,this.eAccount.is_active=this.selectedAccount.is_active.toString()},watch:{selectedAccount(e){this.eAccount=e,this.eAccount.is_active=e.is_active.toString()}}},gt={key:0},ht={key:1};function ft(e,t){const a=r("el-button"),n=r("el-input"),i=r("el-form-item"),o=r("el-option"),m=r("el-select"),h=r("el-form");return u(),f($,null,[e.eAccount&&e.showEditAccount?(u(),f("div",gt,[C("div",null,c(e.i18nEdit)+"\xA0"+c(e.i18nAccount),1),l(a,{type:"primary",onClick:e.toggleEditors},{default:s(()=>[y(c(e.editPwdLabel),1)]),_:1},8,["onClick"]),l(h,{model:e.eAccount,"label-width":"140px",rules:e.rules,ref:"actRef"},{default:s(()=>[l(i,{label:e.i18nName,prop:"username"},{default:s(()=>[l(n,{modelValue:e.eAccount.username,"onUpdate:modelValue":t[0]||(t[0]=p=>e.eAccount.username=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.iEmail,prop:"email"},{default:s(()=>[l(n,{modelValue:e.eAccount.email,"onUpdate:modelValue":t[1]||(t[1]=p=>e.eAccount.email=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.iPermission},{default:s(()=>[l(m,{modelValue:e.eAccount.permission,"onUpdate:modelValue":t[2]||(t[2]=p=>e.eAccount.permission=p)},{default:s(()=>[(u(!0),f($,null,E(e.pArr,p=>(u(),T(o,{label:p,value:p},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.i18nIsActive},{default:s(()=>[l(m,{modelValue:e.eAccount.is_active,"onUpdate:modelValue":t[3]||(t[3]=p=>e.eAccount.is_active=p),placeholder:"Select"},{default:s(()=>[l(o,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(o,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(i,null,{default:s(()=>[l(a,{type:"success",onClick:t[4]||(t[4]=p=>e.updateAccount("actRef"))},{default:s(()=>[y(c(e.i18nUpdate),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])):b("",!0),e.showEditPassword?(u(),f("div",ht,[C("div",null,c(e.eAccount.username),1),l(a,{type:"primary",onClick:e.toggleEditors},{default:s(()=>[y(c(e.editActLabel),1)]),_:1},8,["onClick"]),l(h,{model:e.pwdEdit,"label-width":"140px",rules:e.rules,ref:"pwdRef"},{default:s(()=>[l(i,{label:e.iPassword,prop:"password1"},{default:s(()=>[l(n,{type:"password","show-password":"",modelValue:e.pwdEdit.password1,"onUpdate:modelValue":t[5]||(t[5]=p=>e.pwdEdit.password1=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(i,{label:e.iPassword,prop:"password2"},{default:s(()=>[l(n,{type:"password","show-password":"",modelValue:e.pwdEdit.password2,"onUpdate:modelValue":t[6]||(t[6]=p=>e.pwdEdit.password2=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(i,null,{default:s(()=>[l(a,{type:"success",onClick:t[7]||(t[7]=p=>e.updatePassword("pwdRef"))},{default:s(()=>[y(c(e.i18nUpdate),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])):b("",!0),C("div",null,[l(h,{"label-width":"140px"},{default:s(()=>[l(i,null,{default:s(()=>[l(a,{type:"primary",onClick:e.close},{default:s(()=>[y(c(e.i18nClose),1)]),_:1},8,["onClick"])]),_:1})]),_:1})])],64)}const _t=w(Tt,[["render",ft]]),St={name:"CreateAccount",emits:["createAccount:create","createAccount:close"],data(){return{pArr:[1,2,3,4,5,6,7,8,9,10],cAccount:{username:"",email:"",permission:"1",is_active:"1",password1:"",password2:""},rules:{username:[{required:!0,message:"username is required",trigger:"change"},{min:4,max:24,message:"4 to 24 characters",trigger:"change"}],email:[{required:!0,message:"Email is required",trigger:"change"},{validator:this.isEmail,message:"Invalid email",trigger:"change"}],password1:[{required:!0,message:"password is required",trigger:"change"},{min:6,max:16,message:"6 to 16 characters",trigger:"change"},{validator:this.isAlphanumDashStarUnderscore,message:"alphanum, dash, star, underscore",trigger:"change"}],password2:[{required:!0,message:"password is required",trigger:"change"},{min:6,max:16,message:"6 to 16 characters",trigger:"change"},{validator:this.isAlphanumDashStarUnderscore,message:"alphanum, dash, star, underscore",trigger:"change"},{validator:this.isSameAsPassword1,message:"passwords must match",trigger:"change"}]}}},computed:{i18nClose(){return this.$i18n.t("message.close")},i18nCreate(){return this.$i18n.t("message.create")},i18nName(){return this.$i18n.t("message.name")},i18nFalse(){return this.$i18n.t("message.false")},i18nIsActive(){return this.$i18n.t("message.isActive")},iPermission(){return this.$i18n.t("message.permission")},iEmail(){return this.$i18n.t("message.email")},i18nAccount(){return this.$i18n.t("message.account")},i18nTrue(){return this.$i18n.t("message.true")},iPassword(){return this.$i18n.t("message.password")}},methods:{createAccount(e){this.$refs[e].validate(t=>{t?this.$emit("createAccount:create",{...this.cAccount}):console.log("not valid")})},close(){this.cAccount={title:"",is_active:"1",display_order:"0"},this.$emit("createAccount:close")},isAlphanumDashStarUnderscore(e,t,a){/^[A-Za-z0-9_*-]+$/.test(t)==!1?a(new Error("must be alpha numeric, dash, star, underscore")):a()},isEmail(e,t,a){/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(t)==!1?a(new Error("Invalid email")):a()},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()},isSameAsPassword1(e,t,a){t!==this.cAccount.password1?a(new Error("must match")):a()}}};function bt(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-form");return u(),f($,null,[C("div",null,c(e.i18nCreate)+"\xA0"+c(e.i18nAccount),1),l(h,{model:e.cAccount,"label-width":"140px",rules:e.rules,ref:"createAccountRef"},{default:s(()=>[l(n,{label:e.i18nName,prop:"username"},{default:s(()=>[l(a,{modelValue:e.cAccount.username,"onUpdate:modelValue":t[0]||(t[0]=p=>e.cAccount.username=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.iEmail,prop:"email"},{default:s(()=>[l(a,{modelValue:e.cAccount.email,"onUpdate:modelValue":t[1]||(t[1]=p=>e.cAccount.email=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.iPermission},{default:s(()=>[l(o,{modelValue:e.cAccount.permission,"onUpdate:modelValue":t[2]||(t[2]=p=>e.cAccount.permission=p)},{default:s(()=>[(u(!0),f($,null,E(e.pArr,p=>(u(),T(i,{label:p,value:p},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nIsActive},{default:s(()=>[l(o,{modelValue:e.cAccount.is_active,"onUpdate:modelValue":t[3]||(t[3]=p=>e.cAccount.is_active=p),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.iPassword,prop:"password1"},{default:s(()=>[l(a,{type:"password","show-password":"",modelValue:e.cAccount.password1,"onUpdate:modelValue":t[4]||(t[4]=p=>e.cAccount.password1=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.iPassword,prop:"password2"},{default:s(()=>[l(a,{type:"password","show-password":"",modelValue:e.cAccount.password2,"onUpdate:modelValue":t[5]||(t[5]=p=>e.cAccount.password2=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"danger",onClick:e.close},{default:s(()=>[y(c(e.i18nClose),1)]),_:1},8,["onClick"]),l(m,{type:"success",onClick:t[6]||(t[6]=p=>e.createAccount("createAccountRef"))},{default:s(()=>[y(c(e.i18nCreate)+"\xA0"+c(e.i18nAccount),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])],64)}const Ct=w(St,[["render",bt]]),wt={name:"Accounts",components:{TableAccounts:yt,EditAccount:_t,CreateAccount:Ct},data(){return{reloadTrigger:1,selectedAccount:null,displayCreateAccount:!1}},computed:{i18nCreate(){return this.$i18n.t("message.create")},iAccount(){return this.$i18n.t("message.account")},token(){return G().token}},methods:{accountEditClose(){this.selectedAccount=null},closeCreateAccount(){this.displayCreateAccount=!1},createAccount(e){e.is_active=parseInt(e.is_active),e.password=e.password1,console.table(e),S.account.createAccount(this.token,e).then(t=>{t.data.create==!0?(this.reloadTrigger+=1,g({type:"success",message:"Account was created."}),this.displayCreateAccount=!1):g({type:"error",message:"Error! Not created."})})},closeEditAccount(){this.selectedAccount=null},deleteAccount(e){console.log(e),S.accounts.deleteAccount(this.token,e).then(t=>{t.data.delete==!0||g({type:"danger",message:"Error!  Not deleted."})})},passwordUpdate(e,t){console.table(e),console.log(t);const a={id:e.id,pwd:t};S.account.updateAccountPassword(this.token,a).then(n=>{n&&n.data.update?(this.reloadTrigger+=1,g({type:"success",message:"Account was updated."})):g({type:"error",message:"Error!  Not updated."})})},showCreateAccount(){this.displayCreateAccount=!0,this.selectedAccount=null},accountSelected(e){this.selectedAccount=e,this.displayCreateAccount=!1},accountUpdate(e){e.is_active=parseInt(e.is_active),console.table(e),console.log(e.roles),S.account.updateAccount(this.token,e).then(t=>{t.data.update==!0?(this.reloadTrigger+=1,g({type:"success",message:"Account was updated."})):g({type:"error",message:"Error!  Not updated."})})}}};function vt(e,t){const a=r("el-button"),n=r("TableAccounts"),i=r("EditAccount"),o=r("CreateAccount");return u(),f("div",null,[l(a,{type:"primary",onClick:e.showCreateAccount},{default:s(()=>[y(c(e.i18nCreate)+" "+c(e.iAccount),1)]),_:1},8,["onClick"]),l(n,{reloadTrigger:e.reloadTrigger,"onTableAccounts:accountSelected":e.accountSelected},null,8,["reloadTrigger","onTableAccounts:accountSelected"]),e.selectedAccount?(u(),T(i,{key:0,selectedAccount:e.selectedAccount,onEditAccountClose:e.accountEditClose,onEditAccountUpdate:e.accountUpdate,onEditAccountPasswordUpdate:e.passwordUpdate},null,8,["selectedAccount","onEditAccountClose","onEditAccountUpdate","onEditAccountPasswordUpdate"])):b("",!0),e.displayCreateAccount?(u(),T(o,{key:1,"onCreateAccount:create":e.createAccount,"onCreateAccount:close":e.closeCreateAccount},null,8,["onCreateAccount:create","onCreateAccount:close"])):b("",!0)])}const $t=w(wt,[["render",vt]]),At={name:"TablePaymentTypes",props:["reloadTrigger"],emits:["tablePaymentTypes:paymentTypeSelected"],data(){return{cellStyle:{padding:"5px"},selctedPaymentType:{},paymentTypes:[],tstriped:!0}},computed:{token(){return G().token}},methods:{getAllPaymentTypes(){S.paymentTypes.getAllPaymentTypes(this.token).then(e=>{this.paymentTypes=e.data.all_payment_types})},rowSelected(e){console.log("selected"),this.$emit("tablePaymentTypes:paymentTypeSelected",{...e})}},mounted(){this.getAllPaymentTypes()},watch:{reloadTrigger(e,t){this.getAllPaymentTypes()}}};function Vt(e,t){const a=r("el-table-column"),n=r("el-table");return u(),T(n,{data:e.paymentTypes,stripe:"","highlight-current-row":"",height:"500",size:"small",style:{width:"100%"},"cell-class-name":"t-table-cell","table-layout":"auto",onRowClick:e.rowSelected},{default:s(()=>[l(a,{prop:"id",label:"Id"}),l(a,{prop:"payment_title",label:"Title"}),l(a,{prop:"is_active",label:"Is Active"}),l(a,{prop:"display_order",label:"Display Order"})]),_:1},8,["data","onRowClick"])}const Et=w(At,[["render",Vt]]),Gt={name:"EditPaymentType",props:["selectedPaymentType"],emits:["editPaymentType-close","editPaymentType-update","editPaymentType-delete"],data(){return{ePaymentType:null,rules:{title:[{required:!0,message:"Title is required",trigger:"change"},{min:4,max:24,message:"4 to 24",trigger:"change"}],display_order:[{required:!0,message:"Display order is required",trigger:"change"},{validator:this.isInteger,message:"Display order must be a number",trigger:"change"},{validator:this.isGreaterThan1,message:"Display order must be at least 1",trigger:"change"}]}}},computed:{i18nClose(){return this.$i18n.t("message.close")},i18nDisplayOrder(){return this.$i18n.t("message.displayOrder")},i18nEdit(){return this.$i18n.t("message.edit")},i18nFalse(){return this.$i18n.t("message.false")},i18nIsActive(){return this.$i18n.t("message.isActive")},i18nTaxRate(){return this.$i18n.t("message.taxRate")},i18nFoo(){return this.$i18n.t("message.stTitle")},i18nPaymentType(){return this.$i18n.t("message.paymentType")},i18nTrue(){return this.$i18n.t("message.true")},i18nUpdate(){return this.$i18n.t("message.update")}},methods:{close(){this.$emit("editPaymentType-close")},deletePaymentType(){console.log("del"),this.$emit("editPaymentType-delete",{...this.ePaymentType})},updatePaymentType(e){this.$refs[e].validate(t=>{t?this.$emit("editPaymentType-update",{...this.ePaymentType}):console.log("not valid")})},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()}},created(){},mounted(){this.ePaymentType=this.selectedPaymentType,this.ePaymentType.is_active=this.selectedPaymentType.is_active.toString()},watch:{selectedPaymentType(e){this.ePaymentType=e,this.ePaymentType.is_active=e.is_active.toString()}}},Pt={key:0},kt=C("hr",null,null,-1);function Ut(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-form"),p=r("el-popconfirm");return e.ePaymentType?(u(),f("div",Pt,[C("div",null,c(e.i18nEdit)+"\xA0"+c(e.i18nPaymentType),1),l(h,{model:e.ePaymentType,"label-width":"120px",rules:e.rules,ref:"paymentTypeRef"},{default:s(()=>[l(n,{label:e.i18nFoo,prop:"payment_title"},{default:s(()=>[l(a,{modelValue:e.ePaymentType.payment_title,"onUpdate:modelValue":t[0]||(t[0]=d=>e.ePaymentType.payment_title=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nIsActive},{default:s(()=>[l(o,{modelValue:e.ePaymentType.is_active,"onUpdate:modelValue":t[1]||(t[1]=d=>e.ePaymentType.is_active=d),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nDisplayOrder,prop:"display_order"},{default:s(()=>[l(a,{modelValue:e.ePaymentType.display_order,"onUpdate:modelValue":t[2]||(t[2]=d=>e.ePaymentType.display_order=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"primary",onClick:e.close},{default:s(()=>[y(c(e.i18nClose),1)]),_:1},8,["onClick"]),l(m,{type:"success",onClick:t[3]||(t[3]=d=>e.updatePaymentType("paymentTypeRef"))},{default:s(()=>[y(c(e.i18nUpdate),1)]),_:1})]),_:1})]),_:1},8,["model","rules"]),kt,l(p,{title:"Are you sure to delete this?",onConfirm:e.deletePaymentType},{reference:s(()=>[l(m,{type:"danger"},{default:s(()=>[y("Delete")]),_:1})]),_:1},8,["onConfirm"])])):b("",!0)}const Dt=w(Gt,[["render",Ut]]),It={name:"CreatePaymentType",emits:["createPaymentType:create","createPaymentType:close"],data(){return{cPaymentType:{payment_title:"",is_active:"1",display_order:"0"},rules:{payment_title:[{required:!0,message:"Title is required",trigger:"change"},{min:4,max:24,message:"4 to 24 characters",trigger:"change"}],display_order:[{required:!0,message:"Display order title is required",trigger:"change"},{validator:this.isInteger,message:"Display order must be a number",trigger:"change"},{validator:this.isGreaterThan1,message:"Display order must be at least 1",trigger:"change"}]}}},computed:{i18nClose(){return this.$i18n.t("message.close")},i18nCreate(){return this.$i18n.t("message.create")},i18nDisplayOrder(){return this.$i18n.t("message.displayOrder")},i18nFalse(){return this.$i18n.t("message.false")},i18nIsActive(){return this.$i18n.t("message.isActive")},i18nTaxRate(){return this.$i18n.t("message.taxRate")},i18nBlah(){return this.$i18n.t("message.stTitle")},i18nPaymentType(){return this.$i18n.t("message.paymentType")},i18nTrue(){return this.$i18n.t("message.true")}},methods:{createPaymentType(e){this.$refs[e].validate(t=>{t?this.$emit("createPaymentType:create",{...this.cPaymentType}):console.log("not valid")})},close(){this.cPaymentType={title:"",is_active:"1",display_order:"0"},this.$emit("createPaymentType:close")},isFloat(e,t,a){console.log("pf",Number(t)),isNaN(Number(t))?a(new Error("must be a float")):a()},isGreaterThan1(e,t,a){parseInt(t)<1?a(new Error("must be greater than 0")):a()},isInteger(e,t,a){/^[0-9]*$/.test(t)==!1?a(new Error("must be numbers")):a()}}};function Nt(e,t){const a=r("el-input"),n=r("el-form-item"),i=r("el-option"),o=r("el-select"),m=r("el-button"),h=r("el-form");return u(),f($,null,[C("div",null,c(e.i18nCreate)+"\xA0"+c(e.i18nPaymentType),1),l(h,{model:e.cPaymentType,"label-width":"120px",rules:e.rules,ref:"createPaymentTypeRef"},{default:s(()=>[l(n,{label:e.i18nBlah,prop:"payment_title"},{default:s(()=>[l(a,{modelValue:e.cPaymentType.payment_title,"onUpdate:modelValue":t[0]||(t[0]=p=>e.cPaymentType.payment_title=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nIsActive},{default:s(()=>[l(o,{modelValue:e.cPaymentType.is_active,"onUpdate:modelValue":t[1]||(t[1]=p=>e.cPaymentType.is_active=p),placeholder:"Select"},{default:s(()=>[l(i,{label:e.i18nTrue,value:"1"},null,8,["label"]),l(i,{label:e.i18nFalse,value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.i18nDisplayOrder,prop:"display_order"},{default:s(()=>[l(a,{modelValue:e.cPaymentType.display_order,"onUpdate:modelValue":t[2]||(t[2]=p=>e.cPaymentType.display_order=p)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,null,{default:s(()=>[l(m,{type:"danger",onClick:e.close},{default:s(()=>[y(c(e.i18nClose),1)]),_:1},8,["onClick"]),l(m,{type:"success",onClick:t[3]||(t[3]=p=>e.createPaymentType("createPaymentTypeRef"))},{default:s(()=>[y(c(e.i18nCreate)+"\xA0"+c(e.i18nPaymentType),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])],64)}const Rt=w(It,[["render",Nt]]),Ft={name:"PaymentTypes",components:{TablePaymentTypes:Et,EditPaymentTypes:Dt,CreatePaymentType:Rt},data(){return{reloadTrigger:1,selectedPaymentType:null,displayCreatePaymentType:!1}},computed:{i18nCreate(){return this.$i18n.t("message.create")},iPaymentType(){return this.$i18n.t("message.paymentType")},token(){return G().token}},methods:{closeCreatePaymentType(){this.displayCreatePaymentType=!1},createPaymentType(e){e.is_active=parseInt(e.is_active),e.display_order=parseInt(e.display_order),S.paymentTypes.createPaymentType(this.token,e).then(t=>{t.data.create==!0?(R().setActivePaymentTypes(t.data.active_payment_types),this.reloadTrigger+=1,g({type:"success",message:"PaymentType was created."}),this.displayCreatePaymentTypes=!1):g({type:"error",message:"Error! Not created."})})},closeEditPaymentTypes(){this.selectedPaymentType=null},showCreatePaymentType(){this.displayCreatePaymentType=!0,this.selectedPaymentType=null},paymentTypeDelete(e){console.log("o",e),S.paymentTypes.deletePaymentType(this.token,e.id).then(t=>{t.data.delete==!0?(this.selectedPaymentType=null,R().setActivePaymentTypes(t.data.active_payment_types),this.reloadTrigger+=1,g({type:"success",message:"Payment type group was deletd."})):g({type:"error",message:"Error!  Not deleted."})})},paymentTypeSelected(e){this.selectedPaymentType=e,this.displayCreatePaymentType=!1},paymentTypeUpdate(e){e.is_active=parseInt(e.is_active),S.paymentTypes.updatePaymentType(this.token,e).then(t=>{t.data.update==!0?(R().setActivePaymentTypes(t.data.active_payment_types),this.reloadTrigger+=1,g({type:"success",message:"Payment type was updated."})):g({type:"error",message:"Error!  Not updated."})})}}},Ot=C("p",{style:{color:"red"}},"This currently lets the user delete and update willy nilly. Need to make sure it doesn't compromise data.",-1);function qt(e,t){const a=r("el-col"),n=r("el-row"),i=r("el-button"),o=r("TablePaymentTypes"),m=r("EditPaymentTypes"),h=r("CreatePaymentType");return u(),f($,null,[l(n,null,{default:s(()=>[l(a,{xs:24},{default:s(()=>[Ot]),_:1})]),_:1}),l(n,null,{default:s(()=>[l(a,{xs:24},{default:s(()=>[l(i,{type:"primary",onClick:t[0]||(t[0]=p=>(e.displayCreatePaymentType=!0,e.selectedPaymentType=null))},{default:s(()=>[y(c(e.i18nCreate)+" "+c(e.iPaymentType),1)]),_:1})]),_:1})]),_:1}),l(n,null,{default:s(()=>[l(a,{xs:24,sm:12},{default:s(()=>[l(o,{reloadTrigger:e.reloadTrigger,"onTablePaymentTypes:paymentTypeSelected":e.paymentTypeSelected},null,8,["reloadTrigger","onTablePaymentTypes:paymentTypeSelected"])]),_:1}),l(a,{xs:24,sm:12},{default:s(()=>[e.selectedPaymentType?(u(),T(m,{key:0,selectedPaymentType:e.selectedPaymentType,onEditPaymentTypeClose:e.closeEditPaymentTypes,onEditPaymentTypeUpdate:e.paymentTypeUpdate,onEditPaymentTypeDelete:e.paymentTypeDelete},null,8,["selectedPaymentType","onEditPaymentTypeClose","onEditPaymentTypeUpdate","onEditPaymentTypeDelete"])):b("",!0),e.displayCreatePaymentType?(u(),T(h,{key:1,"onCreatePaymentType:create":e.createPaymentType,"onCreatePaymentType:close":e.closeCreatePaymentType},null,8,["onCreatePaymentType:create","onCreatePaymentType:close"])):b("",!0)]),_:1})]),_:1})],64)}const Lt=w(Ft,[["render",qt]]),zt={name:"Dashboard",components:{SpaceEdit:re,TaxTypes:be,SaleTypeGroups:Re,SpaceTypes:Xe,SaleTypes:ut,Accounts:$t,PaymentTypes:Lt},data(){return{showSpaceEdit:!1,showTaxTypes:!1,showSaleTypeGroups:!1,showSpaceTypes:!1,showSaleTypes:!1,showAccounts:!1,showPaymentTypes:!1}},methods:{hideAllViews(){this.showSpaceEdit=!1,this.showTaxTypes=!1,this.showSaleTypeGroups=!1,this.showSpaceTypes=!1,this.showSaleTypes=!1,this.showAccounts=!1,this.showPaymentTypes=!1}}};function Bt(e,t,a,n,i,o){const m=r("el-menu-item"),h=r("el-menu"),p=r("el-aside"),d=r("Accounts"),A=r("SpaceEdit"),v=r("TaxTypes"),D=r("SaleTypeGroups"),_=r("SpaceTypes"),q=r("SaleTypes"),L=r("PaymentTypes"),z=r("el-main"),B=r("el-container");return u(),T(B,{style:{height:"600px"}},{default:s(()=>[l(p,{width:"200px"},{default:s(()=>[l(h,{class:"el-menu-dashboard"},{default:s(()=>[l(m,{onClick:t[0]||(t[0]=k=>(o.hideAllViews(),i.showAccounts=!0)),index:"1-0"},{default:s(()=>[y("Accounts")]),_:1}),l(m,{onClick:t[1]||(t[1]=k=>(o.hideAllViews(),i.showSpaceEdit=!0)),index:"1-1"},{default:s(()=>[y("Space Edit")]),_:1}),l(m,{onClick:t[2]||(t[2]=k=>(o.hideAllViews(),i.showTaxTypes=!0)),index:"1-2"},{default:s(()=>[y("Tax Types")]),_:1}),l(m,{onClick:t[3]||(t[3]=k=>(o.hideAllViews(),i.showSaleTypeGroups=!0)),index:"1-3"},{default:s(()=>[y("SaleTypeGroups")]),_:1}),l(m,{onClick:t[4]||(t[4]=k=>(o.hideAllViews(),i.showSpaceTypes=!0)),index:"1-4"},{default:s(()=>[y("Space Types")]),_:1}),l(m,{onClick:t[5]||(t[5]=k=>(o.hideAllViews(),i.showSaleTypes=!0)),index:"1-5"},{default:s(()=>[y("Sale Types")]),_:1}),l(m,{onClick:t[6]||(t[6]=k=>(o.hideAllViews(),i.showPaymentTypes=!0)),index:"1-6"},{default:s(()=>[y("Payment Types")]),_:1})]),_:1})]),_:1}),l(z,null,{default:s(()=>[i.showAccounts?(u(),T(d,{key:0})):b("",!0),i.showSpaceEdit?(u(),T(A,{key:1})):b("",!0),i.showTaxTypes?(u(),T(v,{key:2})):b("",!0),i.showSaleTypeGroups?(u(),T(D,{key:3})):b("",!0),i.showSpaceTypes?(u(),T(_,{key:4})):b("",!0),i.showSaleTypes?(u(),T(q,{key:5})):b("",!0),i.showPaymentTypes?(u(),T(L,{key:6})):b("",!0)]),_:1})]),_:1})}const Ht=w(zt,[["render",Bt]]);export{Ht as default};
